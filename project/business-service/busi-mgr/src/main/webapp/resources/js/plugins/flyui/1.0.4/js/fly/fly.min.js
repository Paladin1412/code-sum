/*! flyui-core v1.1.5 | by huanzhang & ueteam | Licensed under ISC | 2016-08-03 01:08:57 GMT+0800 */ 
!function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){var c="function"==typeof require&&require;if(!s&&c)return c(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(require,module,exports){"use strict";function empty(){}function ajaxSuccess(e,t,n,r){var i=n.context,a="success";n.dataFilter&&(e=n.dataFilter.call(i,e)),n.success.call(i,e,a,t),r&&r.resolveWith(i,[e,a,t])}function ajaxError(e,t,n,r,i){var a=r.context;r.error.call(a,n,t,e),i&&i.rejectWith(a,[n,t,e])}function ajaxComplete(e,t,n){var r=n.context;n.complete.call(r,t,e)}function mimeToDataType(e){return e&&(e=e.split(";",2)[0]),e&&(e==htmlType?"html":e==jsonType?"json":scriptTypeRE.test(e)?"script":xmlTypeRE.test(e)&&"xml")||"text"}function appendQuery(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function serializeData(e){e.processData&&e.data&&"string"!=$.type(e.data)&&(e.data=$.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=appendQuery(e.url,e.data),e.data=void 0)}function parseArguments(e,t,n,r){return $.isFunction(t)&&(r=n,n=t,t=void 0),$.isFunction(n)||(r=n,n=void 0),{url:e,data:t,success:n,dataType:r}}function serialize(e,t,n,r){var i,a=$.isArray(t),o=$.isPlainObject(t);$.each(t,function(t,s){i=$.type(s),r&&(t=n?r:r+"["+(o||"object"==i||"array"==i?t:"")+"]"),!r&&a?e.add(s.name,s.value):"array"==i||!n&&"object"==i?serialize(e,s,n,t):e.add(t,s)})}var $=require("./fly.jquery"),jsonpID=0,document=window.document,escape=encodeURIComponent,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/,originAnchor=document.createElement("a"),slice=Array.prototype.slice,key,name,Deferred;$.active=0,originAnchor.href=window.location.href,$.ajaxJSONP=function(e,t){if(!("type"in e))return ajax(e);var n,r,i=e.jsonpCallback,a=($.isFunction(i)?i():i)||"jsonp"+ ++jsonpID,o=document.createElement("script"),s=window[a],c=function(e){$(o).triggerHandler("error",e||"abort")},u={abort:c};return t&&t.promise(u),$(o).on("load error",function(i,c){clearTimeout(r),$(o).off().remove(),"error"!=i.type&&n?ajaxSuccess(n[0],u,e,t):ajaxError(null,c||"error",u,e,t),window[a]=s,n&&$.isFunction(s)&&s(n[0]),s=n=void 0}),window[a]=function(){n=arguments},o.src=e.url.replace(/\?(.+)=\?/,"?$1="+a),document.head.appendChild(o),e.timeout>0&&(r=setTimeout(function(){c("timeout")},e.timeout)),u},$.ajaxSettings={type:"GET",beforeSend:empty,success:empty,error:empty,complete:empty,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},$.ajax=function(options){var settings=$.extend({},options||{}),deferred=$.Deferred&&$.Deferred(),urlAnchor,hashIndex;for(key in ajaxSettings)void 0===settings[key]&&(settings[key]=ajaxSettings[key]);settings.crossDomain||(urlAnchor=document.createElement("a"),urlAnchor.href=settings.url,urlAnchor.href=urlAnchor.href,settings.crossDomain=originAnchor.protocol+"//"+originAnchor.host!=urlAnchor.protocol+"//"+urlAnchor.host),settings.url||(settings.url=window.location.toString()),(hashIndex=settings.url.indexOf("#"))>-1&&(settings.url=settings.url.slice(0,hashIndex)),serializeData(settings);var dataType=settings.dataType,hasPlaceholder=/\?.+=\?/.test(settings.url);if(hasPlaceholder&&(dataType="jsonp"),settings.cache!==!1&&(options&&options.cache===!0||"script"!=dataType&&"jsonp"!=dataType)||(settings.url=appendQuery(settings.url,"_="+Date.now())),"jsonp"==dataType)return hasPlaceholder||(settings.url=appendQuery(settings.url,settings.jsonp?settings.jsonp+"=?":settings.jsonp===!1?"":"callback=?")),ajaxJSONP(settings,deferred);var mime=settings.accepts[dataType],headers={},setHeader=function(e,t){headers[e.toLowerCase()]=[e,t]},protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=settings.xhr(),nativeSetHeader=xhr.setRequestHeader,abortTimeout;if(deferred&&deferred.promise(xhr),settings.crossDomain||setHeader("X-Requested-With","XMLHttpRequest"),setHeader("Accept",mime||"*/*"),(mime=settings.mimeType||mime)&&(mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]),xhr.overrideMimeType&&xhr.overrideMimeType(mime)),(settings.contentType||settings.contentType!==!1&&settings.data&&"GET"!=settings.type.toUpperCase())&&setHeader("Content-Type",settings.contentType||"application/x-www-form-urlencoded"),settings.headers)for(name in settings.headers)setHeader(name,settings.headers[name]);if(xhr.setRequestHeader=setHeader,xhr.onreadystatechange=function(){if(4==xhr.readyState){xhr.onreadystatechange=empty,clearTimeout(abortTimeout);var result,error=!1;if(xhr.status>=200&&xhr.status<300||304==xhr.status||0==xhr.status&&"file:"==protocol){if(dataType=dataType||mimeToDataType(settings.mimeType||xhr.getResponseHeader("content-type")),"arraybuffer"==xhr.responseType||"blob"==xhr.responseType)result=xhr.response;else{result=xhr.responseText;try{"script"==dataType?(0,eval)(result):"xml"==dataType?result=xhr.responseXML:"json"==dataType&&(result=blankRE.test(result)?null:"object"==typeof JSON&&JSON.parse?JSON.parse(result):eval("("+result+")"))}catch(e){error=e}if(error)return ajaxError(error,"parsererror",xhr,settings,deferred)}ajaxSuccess(result,xhr,settings,deferred)}else ajaxError(xhr.statusText||null,xhr.status?"error":"abort",xhr,settings,deferred)}},settings.xhrFields)for(name in settings.xhrFields)xhr[name]=settings.xhrFields[name];var async=!("async"in settings)||settings.async;xhr.open(settings.type,settings.url,async,settings.username,settings.password);for(name in headers)nativeSetHeader.apply(xhr,headers[name]);return settings.timeout>0&&(abortTimeout=setTimeout(function(){xhr.onreadystatechange=empty,xhr.abort(),ajaxError(null,"timeout",xhr,settings,deferred)},settings.timeout)),xhr.send(settings.data?settings.data:null),xhr},$.param=function(e,t){var n=[];return n.add=function(e,t){$.isFunction(t)&&(t=t()),null==t&&(t=""),this.push(escape(e)+"="+escape(t))},serialize(n,e,t),n.join("&").replace(/%20/g,"+")},$.when=function(e){var t,n,r,i=slice.call(arguments),a=i.length,o=0,s=1!==a||e&&$.isFunction(e.promise)?a:0,c=1===s?e:Deferred(),u=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?slice.call(arguments):i,r===t?c.notifyWith(n,r):--s||c.resolveWith(n,r)}};if(a>1)for(t=new Array(a),n=new Array(a),r=new Array(a);o<a;++o)i[o]&&$.isFunction(i[o].promise)?i[o].promise().done(u(o,r,i)).fail(c.reject).progress(u(o,n,t)):--s;return s||c.resolveWith(r,i),c.promise()},$.Callbacks=function(e){e=$.extend({},e);var t,n,r,i,a,o,s=[],c=!e.once&&[],u=function(d){for(t=e.memory&&d,n=!0,o=i||0,i=0,a=s.length,r=!0;s&&o<a;++o)if(s[o].apply(d[0],d[1])===!1&&e.stopOnFalse){t=!1;break}r=!1,s&&(c?c.length&&u(c.shift()):t?s.length=0:l.disable())},l={add:function(){if(s){var n=s.length,o=function(t){$.each(t,function(t,n){"function"==typeof n?e.unique&&l.has(n)||s.push(n):n&&n.length&&"string"!=typeof n&&o(n)})};o(arguments),r?a=s.length:t&&(i=n,u(t))}return this},remove:function(){return s&&$.each(arguments,function(e,t){for(var n;(n=$.inArray(t,s,n))>-1;)s.splice(n,1),r&&(n<=a&&--a,n<=o&&--o)}),this},has:function(e){return!(!s||!(e?$.inArray(e,s)>-1:s.length))},empty:function(){return a=s.length=0,this},disable:function(){return s=c=t=void 0,this},disabled:function(){return!s},lock:function(){return c=void 0,t||l.disable(),this},locked:function(){return!c},fireWith:function(e,t){return!s||n&&!c||(t=t||[],t=[e,t.slice?t.slice():t],r?c.push(t):u(t)),this},fire:function(){return l.fireWith(this,arguments)},fired:function(){return!!n}};return l},$.Deferred=Deferred=function(e){var t=[["resolve","done",$.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",$.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",$.Callbacks({memory:1})]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Deferred(function(n){$.each(t,function(t,a){var o=$.isFunction(e[t])&&e[t];i[a[1]](function(){var e=o&&o.apply(this,arguments);if(e&&$.isFunction(e.promise))e.promise().done(n.resolve).fail(n.reject).progress(n.notify);else{var t=this===r?n.promise():this,i=o?[e]:arguments;n[a[0]+"With"](t,i)}})}),e=null}).promise()},promise:function(e){return null!=e?$.extend(e,r):r}},i={};return $.each(t,function(e,a){var o=a[2],s=a[3];r[a[1]]=o.add,s&&o.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[a[0]]=function(){return i[a[0]+"With"](this===i?r:this,arguments),this},i[a[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},module.exports=$.ajax},{"./fly.jquery":9}],2:[function(e,t,n){"use strict";function r(e){var t,n,i,a,o,s,c,u={};for(c=e.match(B),t=0,n=c.length;t<n;t++)i=c[t],a=i.indexOf(":"),o=i.substring(0,a),s=i.substring(a+1),"{"==s.charAt(0)&&(s=r(s)),u[o]=s;return u}function i(e,t,n){var r,i={};for(r in e)i[r]=new n(t,e[r]);return i}function a(e,t,n){var s,c,u,l=e.getAttribute("data-role"),d=e.getAttribute("data-bind"),f=e.nodeName.toLowerCase(),v=e.children,m=[],y=!0,_={};if(n=n||[t],0===f.indexOf("fly:")&&(f=f.substring(4)),!l&&p.ui[f]&&(l=f),(l||d)&&o(e),l&&(u=h(e,l),e=u.target.element,v=e.children),y&&v){for(c=0;c<v.length;c++)m[c]=v[c];for(c=0;c<m.length;c++)a(m[c],t,n)}d&&(d=r(d.replace(I,"")),u||(_=g.parseOptions(e,{textField:"",valueField:"",template:"",valueUpdate:N,valuePrimitive:!1,itemChange:!0,autoBind:!0}),u=new G(e,_)),u.source=t,s=i(d,n,V),_.template&&(s.template=new X(n,"",_.template)),s.click&&(d.events=d.events||{},d.events.click=d.click,s.click.destroy(),delete s.click),s.source&&(y=!1),d.attr&&(s.attr=i(d.attr,n,V)),d.style&&(s.style=i(d.style,n,V)),d.events&&(s.events=i(d.events,n,Q)),d.css&&(s.css=i(d.css,n,V)),u.bind(s)),u&&(e.flyBindingTarget=u)}function o(e){var t=e.flyBindingTarget;t&&(t.destroy(),p.deleteExpando(e,"flyBindingTarget"))}function s(e){o(e),c(e)}function c(e){var t=e.children;if(t)for(var n=0,r=t.length;n<r;n++)s(t[n])}function u(e){var t,n;if(e)for(g.isDOM(e)&&(e=[e]),t=0,n=e.length;t<n;t++)s(e[t])}function l(e,t){var n,r,i;if(e)for(g.isDOM(e)&&(e=[e]),n=0,r=e.length;n<r;n++)i=e[n],1===i.nodeType&&a(i,t)}function d(e){var t=e.element,n=t.flyBindingTarget;n&&l(t,n.source)}function f(e,t){var n,r,i=[],a=0;if(!t)return e;if(e instanceof k){for(n=e.length;a<n;a++)r=e[a],i[a]=r.get?r.get(t):r[t];e=i}else e instanceof O&&(e=e.get(t));return e}function h(e,t){var n=b.component(e,{},t);if(n)return new Z(n)}var p=e("./fly.core"),g=e("./fly.utils"),v=e("./fly.data"),m=e("./fly.template"),y=e("./fly.format"),_=(e("./fly.component"),p.$),b=p.ui,x=_.proxy,w=_.isArray,S=p.Class,T=v.DataSource,C=p.Observable,O=p.ObservableObject,k=p.ObservableArray,$={},j={component:$},E="function",A="number",N="change",D="value",M="source",F="events",P="checked",q="css",R="disabled",H="readonly",M="source",L="dataSource",z="setDataSource",B=/[A-Za-z0-9_\-]+:(\{([^}]*)\}|[^,}]+)/g,I=/\s/g,J="The {0} binding is not supported by the {1} {2}",U=function(e,t){if(e&&t){if(e.getTime())return p.formatDate(e,t);if(typeof e===A)return p.formatNumber(e,t)}return void 0!==e?e:""},W=function(e,t){return"date"==t?e=U(e,"yyyy-MM-dd"):"datetime"==t&&(e=U(e,"yyyy-MM-dd HH:mm:ss")),e},V=C.extend({ctor:function(e,t){var n=this;n._super(),n.source=e&&e[0],n.parents=e,n.path=t,n.dependencies={},n.dependencies[t]=!0,n.observable=n.source instanceof C,n._access=function(e){n.dependencies[e.field]=!0},n.observable&&(n._change=function(e){n.change(e)},n.source.bind(N,n._change))},_parents:function(){var e=this.parents,t=this.get();if(t&&typeof t.parent==E){var n=t.parent();_.inArray(n,e)<0&&(e=[n].concat(e))}return e},change:function(e){var t,n,r=e.field,i=this;if("this"===i.path)i.trigger(N,e);else for(t in i.dependencies)if(0===t.indexOf(r)&&(n=t.charAt(r.length),!n||"."===n||"["===n)){i.trigger(N,e);break}},start:function(e){e.bind("get",this._access)},stop:function(e){e.unbind("get",this._access)},get:function(){var e=this,t=e.source,n=0,r=e.path,i=t;if(!e.observable)return i;for(e.start(e.source),i=t.get(r);void 0===i&&t;)t=e.parents[++n],t instanceof O&&(i=t.get(r));if(void 0===i)for(t=e.source;void 0===i&&t;)t=t.parent(),t instanceof O&&(i=t.get(r));return typeof i===E&&(n=r.lastIndexOf("."),n>0&&(t=t.get(r.substring(0,n))),e.start(t),i=t!==e.source?i.call(t,e.source):i.call(t),e.stop(t)),t&&t!==e.source&&(e.currentSource=t,t.unbind(N,e._change).bind(N,e._change)),e.stop(e.source),i},set:function(e){var t=this.currentSource||this.source,n=p.getter(this.path)(t);typeof n===E?t!==this.source?n.call(t,this.source,e):n.call(t,e):t.set(this.path,e)},destroy:function(){this.observable&&(this.source.unbind(N,this._change),this.currentSource&&this.currentSource.unbind(N,this._change)),this.unbind()}}),Q=V.extend({get:function(){var e,t=this.source,n=this.path,r=0;for(e=t.get(n);!e&&t;)t=this.parents[++r],t instanceof O&&(e=t.get(n));return x(e,t)}}),X=V.extend({ctor:function(e,t,n){this._super(e,t),this.template=n},render:function(e){var t;return this.start(this.source),t=m(this.template,e.toJSON&&e.toJSON(!0)||e),this.stop(this.source),t}}),G=S.extend({ctor:function(e,t){this.target=e,this.options=t,this.toDestroy=[]},bind:function(e){var t,n,r,i,a,o,s=this instanceof Z,c=this.binders();for(t in e)t==D?n=!0:t==M?r=!0:t==F?i=!0:t==P?a=!0:t!=q||s?this.applyBinding(t,e,c):o=!0;r&&this.applyBinding(M,e,c),n&&this.applyBinding(D,e,c),a&&this.applyBinding(P,e,c),i&&this.applyBinding(F,e,c),o&&!s&&this.applyBinding(q,e,c)},binders:function(){return j[this.target.nodeName.toLowerCase()]||{}},applyBinding:function(e,t,n){var r,i=n[e]||j[e],a=this.toDestroy,o=t[e];if(i)if(i=new i(this.target,t,this.options),a.push(i),o instanceof V)i.bind(o),a.push(o);else for(r in o)i.bind(o,r),a.push(o[r]);else if("template"!==e)throw new Error(y(J,e,this.target.nodeName.toLowerCase(),"element"))},destroy:function(){var e,t,n=this.toDestroy;for(e=0,t=n.length;e<t;e++)n[e].destroy()}}),Z=G.extend({binders:function(){return $[this.target.name.toLowerCase()]||{}},applyBinding:function(e,t,n){var r,i=n[e]||$[e],a=this.toDestroy,o=t[e];if(!i)throw new Error(y(J,e,this.target.name,"component"));if(i=new i(this.target,t,this.target.options),a.push(i),o instanceof V)i.bind(o),a.push(o);else for(r in o)i.bind(o,r),a.push(o[r])}}),K=S.extend({ctor:function(e,t,n){this.element=e,this.bindings=t,this.options=n},bind:function(e,t){var n=this;e=t?e[t]:e,e.bind(N,function(e){n.refresh(t||e)}),n.refresh(t)},destroy:function(){}}),Y=K.extend({dataType:function(){var e=this.element.getAttribute("data-type")||this.element.type||"text";return e.toLowerCase()},parsedValue:function(){return this._parseValue(this.element.value,this.dataType())},_parseValue:function(e,t){return"date"==t?e=U(e,"yyyy-MM-dd"):"datetime"==t?e=U(e,"yyyy-MM-dd HH:mm:ss"):"number"==t?e=parseFloat(e):"boolean"==t&&(e=e.toLowerCase(),e=NaN!==parseFloat(e)?Boolean(parseFloat(e)):"true"===e),e}});j.attr=K.extend({refresh:function(e){this.element.setAttribute(e,this.bindings.attr[e].get())}}),j.css=K.extend({ctor:function(e,t,n){this._super(e,t,n),this.classes={}},refresh:function(e){var t=this.element,n=this.bindings.css[e],r=this.classes[e]=n.get();r?p.addClass(t,e):p.removeClass(t,e)}}),j.style=K.extend({refresh:function(e){this.element.style[e]=this.bindings.style[e].get()||""}}),j.enabled=K.extend({refresh:function(){this.bindings.enabled.get()?this.element.removeAttribute(R):this.element.setAttribute(R,R)}}),j.readonly=K.extend({refresh:function(){this.bindings.readonly.get()?this.element.setAttribute(H,H):this.element.removeAttribute(H)}}),j.disabled=K.extend({refresh:function(){this.bindings.disabled.get()?this.element.setAttribute(R,R):this.element.removeAttribute(R)}}),j.events=K.extend({ctor:function(e,t,n){this._super(e,t,n),this.handlers={}},refresh:function(e){var t=this.element,n=this.bindings.events[e],r=this.handlers[e];r&&p.off(t,e,r),r=this.handlers[e]=function(e){e.handleObj=e.handleObj||{},e.handleObj.data=n.source,n.get()(e)},p.on(t,e,r)},destroy:function(){var e,t=this.element;for(e in this.handlers)p.off(t,e,this.handlers[e])}}),j.text=K.extend({refresh:function(){var e=this.element,t=e.getAttribute("data-format")||"",n=this.bindings.text.get();null==n&&(n=""),e.innerText=U(n,t)}}),j.visible=K.extend({refresh:function(){this.bindings.visible.get()?this.element.style.display="":this.element.style.display="none"}}),j.invisible=K.extend({refresh:function(){this.bindings.invisible.get()?this.element.style.display="none":this.element.style.display=""}}),j.html=K.extend({refresh:function(){this.element.innerHTML=this.bindings.html.get()}}),j.value=Y.extend({ctor:function(e,t,n){this._super(e,t,n),this._change=x(this.change,this),this.eventName=n.valueUpdate||N,p.on(this.element,this.eventName,this._change),this._initChange=!1},change:function(){this._initChange=this.eventName!=N,this.bindings[D].set(this.parsedValue()),this._initChange=!1},refresh:function(){if(!this._initChange){var e=this.bindings[D].get();null==e&&(e=""),e=W(e,this.dataType()),this.element.value=e}this._initChange=!1},destroy:function(){p.off(this.element,this.eventName,this._change)}}),j.source=K.extend({ctor:function(e,t,n){if(e){this._super(e,t,n);var r=this.bindings.source.get();r instanceof T&&n.autoBind!==!1&&r.fetch()}},refresh:function(e){var t=this,n=t.options.itemChange,r=t.bindings.source.get();r instanceof k?(e=e||{},"add"==e.action?t.add(e.index,e.items):"remove"==e.action?t.remove(e.index,e.items):void 0==e.action?t.render():"itemchange"==e.action&&n&&t.render()):t.render()},container:function(){var e=this.element;return"table"==e.nodeName.toLowerCase()&&(e.tBodies[0]||e.appendChild(document.createElement("tbody")),e=e.tBodies[0]),e},template:function(){var e=this.options,t=e.template,n=e.textField,r=e.valueField,i=this.container().nodeName.toLowerCase();return t?t=m.renderFile(t):(t="select"==i?r||n?'<option value="{{'+r||n+'}}">'+n||r+"</option>":"<option>{{data}}</option>":"tbody"==i?"<tr><td>{{data}}</td></tr>":"ul"==i||"ol"==i?"<li>{{data}}</li>":"{{data}}",t=m.compile(t)),t},add:function(e,t){var n,r,i,o,s=this.container(),c=s.cloneNode(!1),u=s.children[e];if(c.innerHTML=this.template()(t),c.children.length)for(n=this.bindings.source._parents(),r=0,i=t.length;r<i;r++)o=c.children[0],s.insertBefore(o,u||null),a(o,t[r],[t[r]].concat(n))},remove:function(e,t){var n,r=this.container();for(n=0;n<t.length;n++){var i=r.children[e];s(i),r.removeChild(i)}},render:function(){var e,t,n,r=this.bindings.source.get(),i=this.container(),o=this.template();for(r instanceof T&&(r=r.view()),r instanceof k||w(r)||(r=[r]);i.hasChildNodes();)i.removeChild(i.firstChild);if(this.bindings.template){if(c(i),_.each(_(this.bindings.template.render(r)),function(e,t){i.appendChild(t)}),i.children.length)for(e=this.bindings.source._parents(),t=0,n=r.length;t<n;t++)a(i.children[t],r[t],[r[t]].concat(e))}else i.innerHTML=o(r)}}),j.input={checked:Y.extend({ctor:function(e,t,n){this._super(e,t,n),this._change=x(this.change,this),p.on(this.element,N,this._change)},change:function(){var e=this.element,t=this.value();if("radio"==e.type)t=this.parsedValue(),this.bindings[P].set(t);else if("checkbox"==e.type){var n,r=this.bindings[P].get();if(r instanceof k){if(t=this.parsedValue(),t instanceof Date){for(var i=0;i<r.length;i++)if(r[i]instanceof Date&&+r[i]===+t){n=i;break}}else n=r.indexOf(t);n>-1?r.splice(n,1):r.push(t)}else this.bindings[P].set(t)}},refresh:function(){var e=this.bindings[P].get(),t=e,n=this.dataType(),r=this.element;if("checkbox"==r.type)if(t instanceof k){var i=-1;if(e=this.parsedValue(),e instanceof Date){for(var a=0;a<t.length;a++)if(t[a]instanceof Date&&+t[a]===+e){i=a;break}}else i=t.indexOf(e);r.checked=i>=0}else r.checked=t;else"radio"==r.type&&null!=e&&(e=W(e,n),r.value===e.toString()&&(r.checked=!0))},value:function(){var e=this.element,t=e.value;return"checkbox"==e.type&&(t=e.checked),t},destroy:function(){p.off(this.element,N,this._change)}})},j.select={source:j.source.extend({refresh:function(e){var t=this,n=t.bindings.source.get();n instanceof k||n instanceof T?(e=e||{},"add"==e.action?t.add(e.index,e.items):"remove"==e.action?t.remove(e.index,e.items):"itemchange"!=e.action&&void 0!==e.action||(t.render(),t.bindings.value&&t.bindings.value.source.trigger(N,{field:t.bindings.value.path}))):t.render()}}),value:Y.extend({ctor:function(e,t,n){this._super(e,t,n),this._change=x(this.change,this),p.on(this.element,N,this._change)},parsedValue:function(){var e,t,n,r,i=this.dataType(),a=[],o=this.element;for(n=0,r=o.options.length;n<r;n++)t=o.options[n],t.selected&&(e=t.attributes.value,e=e&&e.specified?t.value:t.text,a.push(this._parseValue(e,i)));return a},change:function(){var e,t,n,r,i,a=[],o=(this.element,this.options),s=o.valueField||o.textField,c=o.valuePrimitive;if(a=this.parsedValue(),s)for(e=this.bindings.source.get(),e instanceof T&&(e=e.view()),t=0;t<a.length;t++)for(r=0,i=e.length;r<i;r++){var u=c?this._parseValue(a[t],this.dataType())===e[r].get(s):this._parseValue(e[r].get(s),this.dataType()).toString()===a[t];if(u){a[t]=e[r];break}}n=this.bindings[D].get(),n instanceof k?n.splice.apply(n,[0,n.length].concat(a)):c||!(n instanceof O||null===n||void 0===n)&&s?this.bindings[D].set(a[0].get(s)):this.bindings[D].set(a[0])},refresh:function(){var e,t,n=this.element,r=n.options,i=(this.options.valuePrimitive,this.bindings[D].get()),a=i,o=this.options.valueField||this.options.textField,s=!1,c=this.dataType();a instanceof k||(a=new k([i])),n.selectedIndex=-1;for(var u=0;u<a.length;u++)for(i=a[u],o&&i instanceof O&&(i=i.get(o)),i=W(a[u],c),e=0;e<r.length;e++)t=r[e].value,""===t&&""!==i&&(t=r[e].text),null!=i&&t==i.toString()&&(r[e].selected=!0,s=!0)},destroy:function(){_(this.element).off(N,this._change)}})},$.events=K.extend({ctor:function(e,t,n){this._super(e.element,t,n),this.component=e,this.handlers={}},refresh:function(e){var t=this.bindings.events[e],n=this.handlers[e];n&&this.component.unbind(e,n),n=t.get(),this.handlers[e]=function(e){e.data=t.source,n(e),e.data===t.source&&delete e.data},this.component.bind(e,this.handlers[e])},destroy:function(){var e;for(e in this.handlers)this.component.unbind(e,this.handlers[e])}}),$.checked=K.extend({ctor:function(e,t,n){this._super(e.element,t,n),this.component=e,this._change=x(this.change,this),this.component.bind(N,this._change)},change:function(){this.bindings[P].set(this.value())},refresh:function(){this.component.check(this.bindings[P].get()===!0)},value:function(){var e=this.element,t=e.value;return"on"!=t&&"off"!=t||(t=e.checked),t},destroy:function(){this.component.unbind(N,this._change)}}),$.visible=K.extend({ctor:function(e,t,n){this._super(e.element,t,n),this.component=e},refresh:function(){var e=this.bindings.visible.get();this.component.wrapper[0].style.display=e?"":"none"}}),$.invisible=K.extend({ctor:function(e,t,n){this._super(e.element,t,n),this.component=e},refresh:function(){var e=this.bindings.invisible.get();this.component.wrapper[0].style.display=e?"none":""}}),$.enabled=K.extend({ctor:function(e,t,n){this._super(e.element,t,n),this.component=e},refresh:function(){this.component.enable&&this.component.enable(this.bindings.enabled.get())}}),$.disabled=K.extend({ctor:function(e,t,n){this._super(e.element,t,n),this.component=e},refresh:function(){this.component.enable&&this.component.enable(!this.bindings.disabled.get())}}),$.source=K.extend({ctor:function(e,t,n){var r=this;r._super(e.element,t,n),r.component=e,r._dataBinding=x(r.dataBinding,r),r._dataBound=x(r.dataBound,r),r._itemChange=x(r.itemChange,r)},itemChange:function(e){a(e.item[0],e.data,[e.data].concat(this.bindings[M]._parents()))},dataBinding:function(e){var t,n,r=this.component,i=e.removedItems||r.items();for(t=0,n=i.length;t<n;t++)s(i[t])},dataBound:function(e){var t,n,r,i,o=this.component,s=e.addedItems||o.items(),c=o[L];if(s.length)for(r=e.addedDataItems||c.view(),i=this.bindings[M]._parents(),t=0,n=r.length;t<n;t++)a(s[t],r[t],[r[t]].concat(i))},refresh:function(e){var t,n=this,r=n.component;e=e||{},e.action||(n.destroy(),r.bind("dataBinding",n._dataBinding),r.bind("dataBound",n._dataBound),r.bind("itemChange",n._itemChange),t=n.bindings[M].get(),r[L]instanceof T&&r[L]!=t&&(t instanceof T?r[z](t):t&&t._dataSource?r[z](t._dataSource):(r[L].data(t),n.bindings.value&&b.Select&&r instanceof b.Select&&r.value(f(n.bindings.value.get(),r.options.valueField)))))},destroy:function(){var e=this.component;e.unbind("dataBinding",this._dataBinding),e.unbind("dataBound",this._dataBound),e.unbind("itemChange",this._itemChange)}}),$.value=K.extend({ctor:function(e,t,n){this._super(e.element,t,n),this.component=e,this._change=x(this.change,this),this.component.first(N,this._change);var r=this.bindings.value.get();this._valueIsObservableObject=!n.valuePrimitive&&r instanceof O,this._valueIsObservableArray=r instanceof k,this._initChange=!1},change:function(){var e,t,n,r,i,a,o,s=this.component.value(),c=this.options,u=c.valueField||c.textField,l=_.isArray(s),d=this._valueIsObservableObject,f=[];if(this._initChange=!0,u)if(this.bindings.source&&(o=this.bindings.source.get()),""===s&&(d||c.valuePrimitive))s=null;else{for((!o||o instanceof T)&&(o=this.component.dataSource.view()),l&&(t=s.length,f=s.slice(0)),i=0,a=o.length;i<a;i++)if(n=o[i],r=n.get(u),l){for(e=0;e<t;e++)if(r==f[e]){f[e]=n;break}}else if(r==s){s=d?n:r;break}f[0]&&(s=this._valueIsObservableArray?f:d||!u?f[0]:f[0].get(u))}this.bindings.value.set(s),this._initChange=!1},refresh:function(){if(!this._initChange){var e,t=this.component,n=this.options,r=n.textField,i=n.valueField||r,a=this.bindings.value.get(),o=n.text||"",s=0,c=[];if(void 0===a&&(a=null),i)if(a instanceof k){for(e=a.length;s<e;s++)c[s]=a[s].get(i);a=c}else a instanceof O&&(o=a.get(r),a=a.get(i));t.options.autoBind===!1&&t.listView&&!t.listView.isBound()?(r!==i||o||(o=a),t._preselect(a,o)):t.value(a)}this._initChange=!1},destroy:function(){this.component.unbind(N,this._change)}}),p.bind=l,p.unbind=u,p.notify=d,t.exports=l},{"./fly.component":5,"./fly.core":6,"./fly.data":7,"./fly.format":8,"./fly.template":16,"./fly.utils":17}],3:[function(e,t,n){"use strict";var r=e("./fly.core"),i={},a=Math,o=function(e){var t;try{t=e.toString().split(".")[1].length}catch(n){t=0}return t},s=function(e){return Number(e.toString().replace(".",""))};i.add=function(e,t){var n=a.max(o(e),o(t)),r=a.pow(10,n);return a.floor(e*r+t*r)/r},i.sub=function(e,t){var n=a.max(o(e),o(t)),r=a.pow(10,n);return a.floor(e*r-t*r)/r},i.mul=function(e,t){var n=o(e)+o(t),r=a.pow(10,n);return s(e)*s(t)/r},i.div=function(e,t){var n=o(t)-o(e),r=a.pow(10,n);return s(e)/s(t)*r},r.calc=i,t.exports=i},{"./fly.core":6}],4:[function(e,t,n){var r=function(){},i="ctor",a="function";r.extend=function(e){function t(){this[i].apply(this,arguments)}var n=this.prototype,r=new this;for(var o in e)r[o]=o==i&&typeof e[o]==a&&typeof n[o]==a?function(e,t){return function(){var r=this._super;this._super=n[e];var i=t.apply(this,arguments);return this._super=r,i}}(o,e[o]):e[o];for(var s in this)this.hasOwnProperty(s)&&"extend"!=s&&(t[s]=this[s]);if(t.prototype=r,t.prototype._super=new this,e.statics)for(var o in e.statics)e.statics.hasOwnProperty(o)&&(t[o]=e.statics[o],o==i&&t[o]());return t.prototype.constructor=t,t.extendPrototype=function(e){for(var t in e)r[t]=e[t]},t.fn=t.prototype,t.extend=arguments.callee,t},t.exports=r},{}],5:[function(e,t,n){"use strict";var r=e("./fly.core"),i=e("./fly.observable"),a=e("./fly.utils"),o=(e("./fly.template"),r.$),s=r.NS,c=r.ui,u=([].slice,"string"),l="role",d="handler",f=["id","class","name","style","placeholder","maxlength","href","title","value","disabled","readonly"],h=i.extend({ctor:function(e,t,n){var i,a=this,c=a.name||"";e&&(!e.nodeType&&e.length&&(e=e[0]),t=t||{},i=t.dataSource||null,a.element=e,i&&delete t.dataSource,t=a.options=o.extend(!0,{},r.dataset(e),a.options,t),i&&(t.dataSource=i),a._super(),a._getAttribute(),a.render(),a._setAttribute(),jQuery&&(a.$element=jQuery(a.element)),n!==!1&&(a.element[l]=c.toLowerCase(),a.element[s+c]=a,a.element[d]=a),a.bind(a.events,t))},events:[],options:{},_hasBindingTarget:function(){return!!this.element.flyBindingTarget},_tabindex:function(e){},setOptions:function(e){this._setEvents(e),o.extend(this.options,e)},_setEvents:function(e){for(var t,n=this,r=0,i=n.events.length;r<i;r++)t=n.events[r],n.options[t]&&e[t]&&n.unbind(t,n.options[t]);n.bind(n.events,e)},resize:function(e){var t=this.getSize(),n=this._size;(e||(t.width>0||t.height>0)&&(!n||t.width!==n.width||t.height!==n.height))&&(this._size=t,this._resize(t,e),this.trigger("resize",t))},getSize:function(){var e=this.element;return{width:e.offsetWidth,height:e.offsetHeight}},size:function(e){return e?void this.setSize(e):this.getSize()},setSize:o.noop,_resize:o.noop,dataItems:function(){return this.dataSource&&this.dataSource.view()},render:function(){var e,t,n,r=this.element;if(this.template){for(e=document.createDocumentFragment(),t=o(this.template(this.options))[0],r.parentNode.insertBefore(t,r),n=t.getElementsByTagName("content")[0];r.childNodes.length;)e.appendChild(r.firstChild);n?(n.parentNode.insertBefore(e,n),n.parentNode.removeChild(n)):t.appendChild(e),this.element=t,r.parentNode.removeChild(r)}},_getAttribute:function(){var e=this.element,t={};o.each(f,function(n,r){var i=e.getAttribute(r);i&&(t[r]=i)}),this.attrs=t},_setAttribute:function(){var e=this.element;o.each(this.attrs,function(t,n){if("class"==t){var r=e.getAttribute(t);r&&(n=r+" "+n)}e.setAttribute(t,n)})},destroy:function(){var e=this.element;r.deleteExpando(e,s+this.name),r.deleteExpando(e,d),r.deleteExpando(e,l),this.unbind()}});c.component=function(e,t,n){var i,s,l,d;if(s=c[n]){var f="fly"+s.fn.name,h=new RegExp("^"+f+"$","i");for(var p in e)if(p.match(h)){if(p!==f)return e[p];i=e[p];break}d=a.parseOption(e,"dataSource"),t=o.extend({},a.parseOptions(e,s.fn.options),t),d&&(typeof d===u?t.dataSource=r.getter(d)(window):t.dataSource=d);for(var g,v=0,m=s.fn.events,y=m.length;v<y;v++)g=m[v],l=a.parseOption(e,g),void 0!==l&&(t[g]=r.getter(l)(window));return i?o.isEmptyObject(t)||i.setOptions(t):i=new s(e,t),i}},r.component=function(e){var t=e.fn.name;r.ui[t.toLowerCase()]=e},r.Component=h,t.exports=h},{"./fly.core":6,"./fly.observable":12,"./fly.template":16,"./fly.utils":17}],6:[function(e,t,n){function r(e){return e.getAttribute&&e.getAttribute("class")||""}function i(e,t){var n,r,i,a,o=t||"d",s=1;for(r=0,i=e.length;r<i;r++)a=e[r],""!==a&&(n=a.indexOf("["),0!==n&&(n==-1?a="."+a:(s++,a="."+a.substring(0,n)+" || {})"+a.substring(n))),s++,o+=a+(r<i-1?" || {})":")"));return new Array(s).join("(")+o}var a=e("./fly.jquery"),o=(e("./fly.ajax"),e("./fly.class")),s=e("./fly.support"),c=window,u="string",l=/\S+/g,d=/[\t\r\n\f]/g,f={},h={},p=function(e){return p.observable(e)};p.NS="fly",p.$=window.jQuery||a,p.win=c,p.Class=o,p.support=a.extend(s,a.support),p.ui={roles:{},defaults:{}},p.keys={DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34},p.guid=function(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";return e.replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}).toUpperCase()},p.identity=function(e){return e},p.getQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=c.location.search.substr(1).match(t);return null!=n?unescape(n[2]):""},p.getHash=function(){return c.location.hash.slice(1)},p.now=Date.now||function(){return(new Date).getTime()},p.browser=function(){var e={},t=navigator.userAgent;return t.indexOf("Opera")>-1?e.opera=1:t.indexOf("Firefox")>-1?e.firefox=1:t.indexOf("Chrome")>-1?e.chrome=1:t.indexOf("Safari")>-1?e.safari=1:(window.ActiveXObject||"ActiveXObject"in window)&&(new RegExp("MSIE (\\d+\\.\\d+);").test(t),
e.ie=parseInt(RegExp.$1||11)),e}(),p.top=function(){var e=c,t=function(e){var t;try{t=c[e].document,t.getElementsByTagName}catch(n){return!1}return c[e].fly&&0===t.getElementsByTagName("frameset").length};return t("top")?e=c.top:t("parent")&&(e=c.parent),e}(),p.getComputedStyles=function(e,t){var n,r=document.defaultView,i={};return r&&r.getComputedStyle?(n=r.getComputedStyle(e,""),t&&a.each(t,function(e,t){i[t]=n.getPropertyValue(t)})):(n=e.currentStyle,t&&a.each(t,function(e,t){i[t]=n[t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()})]})),a.isEmptyObject(i)&&(i=n),i},p.isScrollable=function(e){return"visible"!=p.getComputedStyles(e,["overflow"]).overflow},p.activeElement=function(){try{return document.activeElement}catch(e){return document.documentElement.activeElement}},p.expr=function(e,t,n){return e=e||"","string"==typeof t&&(n=t,t=!1),n=n||"d",e&&"["!==e.charAt(0)&&(e="."+e),t?(e=e.replace(/"([^.]*)\.([^"]*)"/g,'"$1_$DOT$_$2"'),e=e.replace(/'([^.]*)\.([^']*)'/g,"'$1_$DOT$_$2'"),e=i(e.split("."),n),e=e.replace(/_\$DOT\$_/g,".")):e=n+e,e},p.getter=function(e,t){var n=e+t;return f[n]=f[n]||new Function("d","return "+p.expr(e,t))},p.setter=function(e){return h[e]=h[e]||new Function("d, value",p.expr(e)+"=value")},p.preventDefault=function(e){e.preventDefault()},p.destroy=function(e){},p.on=function(e,t,n){2==arguments.length&&(n=t,t=e,e=this),e.addEventListener?e.addEventListener(t,n,!1):("input"==t&&(t="propertychange"),e.attachEvent("on"+t,n))},p.off=function(e,t,n){2==arguments.length&&(n=t,t=e,e=this),e.removeEventListener?e.removeEventListener(t,n):("input"==t&&(t="propertychange"),e.detachEvent("on"+t,n))},p.addClass=function(e,t){var n,i,o,s,c,u;if(n=t.match(l)||[],o=r(e),i=1===e.nodeType&&(" "+o+" ").replace(d," ")){for(c=0;s=n[c++];)i.indexOf(" "+s+" ")<0&&(i+=s+" ");u=a.trim(i),o!==u&&e.setAttribute("class",u)}},p.removeClass=function(e,t){var n,i,o,s,c,u;if(n=t.match(l)||[],o=r(e),i=1===e.nodeType&&(" "+o+" ").replace(d," ")){for(c=0;s=n[c++];)for(;i.indexOf(" "+s+" ")>-1;)i=i.replace(" "+s+" "," ");u=a.trim(i),o!==u&&e.setAttribute("class",u)}},p.deleteExpando=function(e,t){typeof e==u&&(t=e,e=this),s.deleteExpando?delete e[t]:e.removeAttribute?e.removeAttribute(t):e[t]=null},p.dataset=function(e){if(s.dataset)return e.dataset;var t,n,r=e.attributes,i={};for(t=0,n=r.length;t<n;t++)"data-"==r[t].name.substring(0,5)&&(i[r[t].name.substring(5)]=r[t].value);return i},p.browser.ie<=8&&document.createElement("content"),t.exports=p},{"./fly.ajax":1,"./fly.class":4,"./fly.jquery":9,"./fly.support":15}],7:[function(e,t,n){"use strict";function r(e){return function(){var t=this._data,n=le.fn[e].apply(this,B.call(arguments));return this._data!=t&&this._attachBubbleHandlers(),n}}function i(e,t){if(e){var n=typeof e===W?{field:e,dir:t}:e,r=R(n)?n:void 0!==n?[n]:[];return H(r,function(e){return!!e.dir})}}function a(e){var t,n,r,i,o=e.filters;if(o)for(t=0,n=o.length;t<n;t++)r=o[t],i=r.operator,i&&typeof i===W&&(r.operator=oe[i.toLowerCase()]||i),a(r)}function o(e){if(e&&!M(e))return!R(e)&&e.filters||(e={logic:"and",filters:R(e)?e:[e]}),a(e),e}function s(e,t,n,r,i){var a,o,s,c,u;for(c=0,u=e.length;c<u;c++){a=e[c];for(o in t)s=i[o],s&&s!==o&&(a[s]=t[o](a),delete a[o])}}function c(e,t,n,r,i){var a,o,s,c,u;for(c=0,u=e.length;c<u;c++){a=e[c];for(o in t)a[o]=n._parse(o,t[o](a)),s=i[o],s&&s!==o&&delete a[s]}}function u(e,t,n,r,i,a){return function(o){return o=e(o),o&&!M(r)&&(toString.call(o)===ae||o instanceof T||(o=[o]),n(o,r,new t,i,a)),o||[]}}function l(e,t,n,r){for(var i=0;i<e.length&&e[i].data!==t&&!d(e[i].data,n,r);i++);}function d(e,t,n){for(var r=0,i=e.length;r<i;r++)if(e[r]===t||e[r]===n)return e[r]=n,!0}function f(e,t,n,r){for(var i=0,a=e.length;i<a;i++){var o=e[i];if(o&&!(o instanceof r))for(var s=0;s<t.length;s++)if(t[s]===o){e[i]=t.at(s),l(n,t,o,e[i]);break}}}function h(e,t){var n,r;for(n=0,r=e.length;n<r;n++){var i=e.at(n);if(i.uid==t.uid)return e.splice(n,1),i}}function p(e,t){return t?v(e,function(e){return e.uid?e.uid==t.uid:e[t.idField]===t.id}):-1}function g(e,t){return t?v(e,function(e){return e.uid==t.uid}):-1}function v(e,t){var n,r;for(n=0,r=e.length;n<r;n++)if(t(e[n]))return n;return-1}function m(e,t){var n,r,i,a,o,s=$(e)[0].children,c=[],u=t[0],l=t[1];for(n=0,r=s.length;n<r;n++)i={},o=s[n],o.disabled||(i[u.field]=o.text,a=o.attributes.value,a=a&&a.specified?o.value:o.text,i[l.field]=a,c.push(i));return c}var y=e("./fly.core"),_=(e("./fly.observable"),e("./fly.model")),b=(e("./fly.format"),e("./fly.utils")),x=y.Class,w=y.Observable,S=y.ObservableObject,T=y.ObservableArray,C=y.LazyObservableArray,O=y.identity,k=y.getter,$=y.$,j=$.ajax,E=$.each,A=$.map,N=$.proxy,D=$.extend,M=$.isEmptyObject,F=$.isPlainObject,P=$.isFunction,q=$.isNumeric,R=$.isArray,H=$.grep,L=$.noop,z=$.Deferred,B=[].slice,I=Math,J={},U="function",W="string",V="change",Q="create",X="read",G="update",Z="destroy",K="error",Y="requestStart",ee="progress",te="requestEnd",ne="empty",re="push",ie=[Q,X,G,Z],ae="[object Array]",oe={"==":"eq","!=":"neq","<":"lt","<=":"lte",">":"gt",">=":"gte",notsubstringof:"doesnotcontain"},se=/^\/Date\((.*?)\)\/$/,ce=/(\r+|\n+)/g,ue=/(?=['\\])/g,le=w.extend({ctor:function(e){if(e){var t,n=this,e=e||{},r=e.data,a=e.read;r&&r.url?a=r:typeof r==W?a={url:r}:R(r)&&(e.server=!1,e.pageMode=0),a&&(e.read=$.extend(a,{url:b.url(a.url)})),e=n.options=D({},n.options,e),n._map={},n._prefetch={},n._data=[],n._pristineData=[],n._ranges=[],n._view=[],n._pristineTotal=0,n._destroyed=[],n._pageSize=e.pageSize,n._page=e.page||(e.pageSize?1:void 0),n._sort=i(e.sort),n._filter=o(e.filter),n._total=e.total,n._shouldDetachObservableParents=!0,n._super(),n.transport=ve.create(e,n),P(n.transport.push)&&n.transport.push({pushCreate:N(n._pushCreate,n),pushUpdate:N(n._pushUpdate,n),pushDestroy:N(n._pushDestroy,n)}),n.reader=new pe(e.model,e.modelBase,a||e.childrenField),t=n.reader.model||{},n._detachObservableParents(),n._data=n._observe(n._data),n._online=!0,n.bind(["push",K,V,Y,te,ee],e)}},options:{data:null,"interface":{},server:!0,serverPage:!0,pageMode:1},parent:L,get:function(e,t){var n,r,i=this._data,t=t||"id";for(n=0,r=i.length;n<r;n++)if(i[n][t]==e)return i[n]},getByUid:function(e){var t,n,r=this._data;if(!r)return null;for(t=0,n=r.length;t<n;t++)if(r[t].uid==e)return r[t]},indexOf:function(e){return g(this._data,e)},at:function(e){return this._data.at(e)},data:function(e){var t=this;if(void 0===e){if(t._data)for(var n=0;n<t._data.length;n++)t._data.at(n);return t._data}t._detachObservableParents(),t._data=this._observe(e),t._pristineData=e.slice(0),t._storeData(),t._ranges=[],t.trigger("reset"),t._addRange(t._data),t._total=t._data.length,t._pristineTotal=t._total,t._process(t._data)},_index:function(e){var t=this.skip()||0;return E(e,function(e,n){void 0!=n&&null!=n&&(n._index=t+e+1)}),e},view:function(e){return void 0===e?this._view:void(this._view=this._observeView(e))},_observeView:function(e){var t=this;f(e,t._data,t._ranges,t.reader.model||S,!1);var n=new C(e,t.reader.model);return n.parent=function(){return t.parent()},n},_createNewModel:function(e){return this.reader.model?new this.reader.model(e):e instanceof S?e:new S(e)},insert:function(e,t){return t||(t=e,e=0),t instanceof _||(t=this._createNewModel(t)),this._data.splice(e,0,t),t},add:function(e){return this.insert(this._data.length,e)},pushCreate:function(e){R(e)||(e=[e]);var t=[],n=this.options.autoSync;this.options.autoSync=!1;try{for(var r=0;r<e.length;r++){var i=e[r],a=this.add(i),o=a.toJSON();t.push(a),this._pristineData.push(o)}}finally{this.options.autoSync=n}t.length&&this.trigger(re,{type:Q,items:t})},pushUpdate:function(e){R(e)||(e=[e]);for(var t=[],n=0;n<e.length;n++){var r=e[n],i=this._createNewModel(r),a=this.get(i.id);a?(t.push(a),a.accept(r),a.trigger(V),this._updatePristineForModel(a,r)):this.pushCreate(r)}t.length&&this.trigger(re,{type:G,items:t})},pushDestroy:function(e){var t=this._removeItems(e);t.length&&this.trigger(re,{type:Z,items:t})},_pushCreate:function(e){this._push(e,"pushCreate")},_pushUpdate:function(e){this._push(e,"pushUpdate")},_pushDestroy:function(e){this._push(e,"pushDestroy")},_push:function(e,t){var n=this._readData(e);n||(n=e),this[t](n)},_removeItems:function(e){R(e)||(e=[e]);var t=[],n=this.options.autoSync;this.options.autoSync=!1;try{for(var r=0;r<e.length;r++){var i=e[r],a=this._createNewModel(i),o=!1;this._eachItem(this._data,function(e){for(var n=0;n<e.length;n++){var r=e.at(n);if(r.id===a.id){t.push(r),e.splice(n,1),o=!0;break}}}),o&&(this._removePristineForModel(a),this._destroyed.pop())}}finally{this.options.autoSync=n}return t},remove:function(e){var t=this;return this._eachItem(t._data,function(t){h(t,e)}),this._removeModelFromRanges(e),this._updateRangesLength(),e},destroyed:function(){return this._destroyed},created:function(){var e,t,n=[],r=this._data;for(e=0,t=r.length;e<t;e++)r[e].isNew&&r[e].isNew()&&n.push(r[e]);return n},updated:function(){var e,t,n=[],r=this._data;for(e=0,t=r.length;e<t;e++)r[e].isNew&&!r[e].isNew()&&r[e].dirty&&n.push(r[e]);return n},cancelChanges:function(e){var t=this;e instanceof _?t._cancelModel(e):(t._destroyed=[],t._detachObservableParents(),t._data=t._observe(t._pristineData),t.options.server&&(t._total=t._pristineTotal),t._ranges=[],t._addRange(t._data),t._change())},hasChanges:function(){var e,t,n=this._data;if(this._destroyed.length)return!0;for(e=0,t=n.length;e<t;e++)if(n[e].isNew&&n[e].isNew()||n[e].dirty)return!0;return!1},_updatePristineForModel:function(e,t){this._executeOnPristineForModel(e,function(e,n){D(!0,n[e],t)})},_executeOnPristineForModel:function(e,t){this._eachPristineItem(function(n){var r=p(n,e);if(r>-1)return t(r,n),!0})},_removePristineForModel:function(e){this._executeOnPristineForModel(e,function(e,t){t.splice(e,1)})},_readData:function(e){var t=this.reader.data;return t.call(this.reader,e)},_eachPristineItem:function(e){this._eachItem(this._pristineData,e)},_eachItem:function(e,t){e&&e.length&&t(e)},_pristineForModel:function(e){var t,n,r=function(r){if(n=p(r,e),n>-1)return t=r[n],!0};return this._eachPristineItem(r),t},_cancelModel:function(e){var t=this._pristineForModel(e);this._eachItem(this._data,function(n){var r=g(n,e);r>=0&&(!t||e.isNew()&&!t.__state__?n.splice(r,1):n[r].accept(t))})},read:function(e){var t=this,n=t._params(e),r=z();return t._queueRequest(n,function(){var e=t.trigger(Y,{type:X});e?(t._dequeueRequest(),r.resolve(e)):(t.trigger(ee),t._ranges=[],t.trigger("reset"),t._online&&t.transport.read({data:n,cache:!1,success:function(e){t.success(e),r.resolve()},error:function(){var e=B.call(arguments);t.error.apply(t,e),r.reject.apply(r,e)}}))}),r.promise()},success:function(e){var t=this;t.options;if(t.trigger(te,{response:e,type:X}),t._online){if(e=t.reader.parse(e),t._handleCustomErrors(e))return void t._dequeueRequest();t._total=t.reader.total(e),e=t._readData(e)}else{e=t._readData(e);for(var n=[],r=0;r<e.length;r++){var i=e[r],a=i.__state__;"destroy"==a?this._destroyed.push(this._createNewModel(i)):n.push(i)}e=n,t._total=e.length}t._pristineTotal=t._total,t._pristineData=e.slice(0),t._detachObservableParents(),t._data=t._observe(e),t._storeData(),t._addRange(t._data),t._process(t._data),t._dequeueRequest()},_detachObservableParents:function(){if(this._data&&this._shouldDetachObservableParents)for(var e=0;e<this._data.length;e++)this._data[e].parent&&(this._data[e].parent=L)},_storeData:function(e){this.options.server,this.reader.model},_addRange:function(e){var t=this,n=t._skip||0,r=n+e.length;t._ranges.push({start:n,end:r,data:e}),t._ranges.sort(function(e,t){return e.start-t.start})},error:function(e,t,n){this._dequeueRequest(),this.trigger(te,{}),this.trigger(K,{xhr:e,status:t,errorThrown:n})},_pageParam:function(){return this.options.pageMode?{currentPageNo:this.page()}:{take:this.take(),skip:this.skip(),page:this.page()}},_params:function(e){var t=this,n=t._pageParam(),r=t.options,i=D(n,{pageSize:t.pageSize(),sort:t._sort},e);return r.server||(r.pageSize||(delete i.take,delete i.skip),delete i.page,delete i.pageSize,delete i.currentPageNo),i},_queueRequest:function(e,t){var n=this;n._requestInProgress?n._pending={callback:N(t,n),options:e}:(n._requestInProgress=!0,n._pending=void 0,t())},_dequeueRequest:function(){var e=this;e._requestInProgress=!1,e._pending&&e._queueRequest(e._pending.options,e._pending.callback)},_handleCustomErrors:function(e){var t=this.reader.errors(e);return!!t&&(this.trigger(t==ne?ne:K,{xhr:null,status:"customerror",errorThrown:"custom error",errors:t}),!0)},_observe:function(e){var t=this,n=t.reader.model,r=!1;if(t._shouldDetachObservableParents=!0,n&&e.length&&(r=!(e[0]instanceof n)),e instanceof T)t._shouldDetachObservableParents=!1,r&&(e.type=t.reader.model,e.wrapAll(e,e));else{var i=t.pageSize()&&!t.options.server?C:T;e=new i(e,t.reader.model),e.parent=function(){return t.parent()}}return t._changeHandler&&t._data&&t._data instanceof T?t._data.unbind(V,t._changeHandler):t._changeHandler=N(t._change,t),e.bind(V,t._changeHandler)},_change:function(e){var t,n,r=this,i=e?e.action:"";if("remove"===i)for(t=0,n=e.items.length;t<n;t++)e.items[t].isNew&&e.items[t].isNew()||r._destroyed.push(e.items[t]);var a=parseInt(r._total,10);q(r._total)||(a=parseInt(r._pristineTotal,10)),"add"===i?a+=e.items.length:"remove"===i?a-=e.items.length:"itemchange"===i||"sync"===i||r.options.server?"sync"===i&&(a=r._pristineTotal=parseInt(r._total,10)):a=r._pristineTotal,r._total=a,r._process(r._data,e)},_process:function(e,t){var n,r=this,i={};r.options.server!==!0&&(i.skip=r._skip,i.take=r._take||r._pageSize,void 0===i.skip&&void 0!==r._page&&void 0!==r._pageSize&&(i.skip=(r._page-1)*r._pageSize)),r.options.server!==!0&&(i.sort=r._sort,i.filter=r._filter),n=r._queryProcess(e,i),r.view(r._index(n.data)),void 0===n.total||r.options.server||(r._total=n.total),t=t||{},t.items=t.items||r._view,r.trigger(V,t)},_queryProcess:function(e,t){return ge.process(e,t)},_mergeState:function(e){var t=this,n=t.options.pageMode;return void 0!==e&&(t._pageSize=e.pageSize,t._page=e.page,t._sort=e.sort,t._filter=e.filter,t._skip=e.skip,t._take=e.take,void 0===t._skip&&(t._skip=t.skip(),e.skip=t.skip()),n||void 0!==t._take||void 0===t._pageSize||(t._take=t._pageSize,e.take=t._take),e.sort&&(t._sort=e.sort=i(e.sort)),e.filter&&(t.options.server?(t._filter=o(e.filter),delete e.filter,t._filter&&E(t._filter.filters,function(t,n){e[n.field]=n.value})):t._filter=e.filter=o(e.filter)),n&&(e.currentPageNo=t._page,delete e.page,delete e.take,delete e.skip)),e},query:function(e){var t,n=this.options.server;if(n||(void 0===this._data||0===this._data.length)&&!this._destroyed.length)return this.read(this._mergeState(e));var r=this.trigger(Y,{type:X});return r||(this.trigger(ee),t=this._queryProcess(this._data,this._mergeState(e)),n||(void 0!==t.total?this._total=t.total:this._total=this._data.length),this.view(this._index(t.data)),this.trigger(te,{type:X}),this.trigger(V,{items:t.data})),z().resolve(r).promise()},fetch:function(e){var t=this,n=function(n){n!==!0&&P(e)&&e.call(t)};return this._query().then(n)},_query:function(e){var t=this;return t.query(D({},{page:t.page(),pageSize:t.pageSize(),sort:t.sort(),filter:t.filter()},e))},next:function(e){var t=this,n=t.page(),r=t.total();if(e=e||{},n&&!(r&&n+1>t.totalPages()))return t._skip=n*t.take(),n+=1,e.page=n,t._query(e),n},prev:function(e){var t=this,n=t.page();if(e=e||{},n&&1!==n)return t._skip=t._skip-t.take(),n-=1,e.page=n,t._query(e),n},page:function(e){var t,n=this;return void 0!==e?(e=this.options.total===!1?I.max(e,1):I.max(I.min(I.max(e,1),n.totalPages()),1),void n._query({page:e})):(t=n.skip(),void 0!==t?I.round((t||0)/(n.take()||1))+1:void 0)},pageSize:function(e){var t=this;return void 0!==e?void t._query({pageSize:e,page:1}):t.take()},sort:function(e){var t=this;return void 0!==e?void t._query({sort:e}):t._sort},filter:function(e){var t=this;return void 0===e?t._filter:(F(e)&&void 0===e.field&&(e=$.map(e,function(e,t){return{field:t,value:e}})),t._query({filter:e,page:1}),void t.trigger("reset"))},total:function(){return parseInt(this._total||0,10)},totalPages:function(){var e=this,t=e.pageSize()||e.total();return I.ceil((e.total()||0)/t)},range:function(e,t){e=I.min(e||0,this.total());var n,r=this,i=r.total(),a=I.max(I.floor(e/t),0)*t,o=I.min(a+t,i);if(r._skipRequestsInProgress=!1,n=r._findRange(e,I.min(e+t,i)),n.length){r._skipRequestsInProgress=!0,r._pending=void 0,r._skip=e>r.skip()?I.min(o,(r.totalPages()-1)*r.take()):a,r._take=t;var s=r.options.server;try{r.options.server=!0,s&&(r._detachObservableParents(),r._data=n=r._observe(n)),r._process(n)}finally{r.options.server=s}}else void 0!==t&&(r._rangeExists(a,o)?a<e&&r.prefetch(o,t,function(){r.range(e,t)}):r.prefetch(a,t,function(){e>a&&o<r.total()&&!r._rangeExists(o,I.min(o+t,r.total()))?r.prefetch(o,t,function(){r.range(e,t)}):r.range(e,t)}))},_findRange:function(e,t){var n,r,a,o,s,c,u,l,d,f,h,p=this,g=p._ranges,v=[],m=p.options,y=m.server;for(r=0,h=g.length;r<h;r++)if(n=g[r],e>=n.start&&e<=n.end){for(f=0,a=r;a<h;a++)if(n=g[a],d=n.data,d.length&&e+f>=n.start){if(c=n.data,u=n.end,!y){var _=i(p.sort()||[]);l=p._queryProcess(n.data,{sort:_,filter:p.filter()}),d=c=l.data,void 0!==l.total&&(u=l.total)}if(o=0,e+f>n.start&&(o=e+f-n.start),s=d.length,u>t&&(s-=u-t),f+=s-o,v=v.concat(c.slice(o,s)),t<=n.end&&f==t-e)return v}break}return[]},skip:function(){var e=this;return void 0===e._skip?void 0!==e._page?(e._page-1)*(e.take()||1):void 0:e._skip},take:function(){return this._take||this._pageSize},_prefetchSuccessHandler:function(e,t,n,r){var i=this;return function(a){var o,s,c,u=!1,l={start:e,end:t,data:[]};if(i._dequeueRequest(),i.trigger(te,{response:a,type:X}),a=i.reader.parse(a),c=i._readData(a),c.length){for(o=0,s=i._ranges.length;o<s;o++)if(i._ranges[o].start===e){u=!0,l=i._ranges[o];break}u||i._ranges.push(l)}l.data=i._observe(c),l.end=l.start+l.data.length,i._ranges.sort(function(e,t){return e.start-t.start}),i._total=i.reader.total(a),!r&&i._skipRequestsInProgress||(n&&c.length?n():i.trigger(V,{}))}},prefetch:function(e,t,n){var r=this,i=I.min(e+t,r.total()),a=D(r._pageParam(),{pageSize:t,sort:r._sort,filter:r._filter});r._rangeExists(e,i)?n&&n():(clearTimeout(r._timeout),r._timeout=setTimeout(function(){r._queueRequest(a,function(){r.trigger(Y,{type:X})?r._dequeueRequest():r.transport.read({data:r._params(a),cache:!1,success:r._prefetchSuccessHandler(e,i,n),error:function(){var e=B.call(arguments);r.error.apply(r,e)}})})},100))},_rangeExists:function(e,t){var n,r,i=this,a=i._ranges;for(n=0,r=a.length;n<r;n++)if(a[n].start<=e&&a[n].end>=t)return!0;return!1},_removeModelFromRanges:function(e){for(var t,n,r,i=0,a=this._ranges.length;i<a&&(r=this._ranges[i],this._eachItem(r.data,function(r){t=h(r,e),t&&(n=!0)}),!n);i++);},_updateRangesLength:function(){for(var e,t,n=0,r=0,i=this._ranges.length;r<i;r++)e=this._ranges[r],e.start=e.start-n,t=e.data.length,n=e.end-t,e.end=e.start+t}});le.create=function(e){(R(e)||e instanceof T)&&(e={data:e});var t,n,r,i=e||{},a=i.data,o=i.fields,s=i.select,c={};if(!a&&o&&!i.transport&&s&&(a=m(s,o)),_&&o&&!i.model){for(t=0,n=o.length;t<n;t++)r=o[t],r.type&&(c[r.field]=r);M(c)||(i.model=D(!0,c,{fields:c}))}return i.data=a,i instanceof le?i:new le(i)};var de=le.extend({ctor:function(e){if(e){var t=fe.define({children:e});this._super(D(!0,{},{modelBase:t,model:t},e)),this._attachBubbleHandlers()}},_attachBubbleHandlers:function(){var e=this;e._data.bind(K,function(t){e.trigger(K,t)})},remove:function(e){var t,n=e.parentNode(),r=this;return n&&n._initChildren&&(r=n.children),t=r._super.remove(e),n&&!r.data().length&&(n.hasChildren=!1),t},success:r("success"),data:r("data"),insert:function(e,t){var n=this.parent();return n&&n._initChildren&&(n.hasChildren=!0,n._initChildren()),this._super.insert.call(this,e,t)},_find:function(e,t,n){var r,i,a,o,s;if(a=this._super[e].call(this,t,n))return a;if(o=this._data)for(r=0,i=o.length;r<i;r++)if(s=o[r].children,s instanceof de&&(a=s[e](t,n)))return a},get:function(e,t){return this._find("get",e,t)},getByUid:function(e){return this._find("getByUid",e)}}),fe=_.define({idField:"id",ctor:function(e){if(e){var t=this,n=t.hasChildren||e&&e.hasChildren,r="items",i={};e.children instanceof Array&&(e.items=e.children,delete e.children),t._super(e),typeof t.children===W&&"children"!=t.children&&(r=t.children),i={childrenField:r,model:{hasChildren:n,id:t.idField,fields:t.fields}},typeof t.children!==W&&D(i,t.children),i.data=e,n||(n=i.childrenField),typeof n===W&&(n=y.getter(n)),P(n)&&(t.hasChildren=!!n.call(t,t)),t._childrenOptions=i,t.hasChildren&&t._initChildren(),t._loaded=!(!e||!e[r]&&!e._loaded)}},_initChildren:function(){var e,t,n,r=this;r.children instanceof de||(e=r.children=new de(r._childrenOptions),t=e.transport,n=t.parameterMap,t.parameterMap=function(e,t){return e[r.idField||"id"]=r.id,n&&(e=n(e,t)),e},e.parent=function(){return r},e.bind(V,function(e){e.node=e.node||r,r.trigger(V,e)}),e.bind(K,function(e){var t=r.parent();t&&(e.node=e.node||r,t.trigger(K,e))}),r._updateChildrenField())},append:function(e){this._initChildren(),this.loaded(!0),this.children.add(e)},hasChildren:!1,level:function(){for(var e=this.parentNode(),t=0;e&&e.parentNode;)t++,e=e.parentNode?e.parentNode():null;return t},_updateChildrenField:function(){var e=this._childrenOptions.childrenField;this[e||"items"]=this.children.data()},_childrenLoaded:function(){this._loaded=!0,this._updateChildrenField()},load:function(){var e,t,n={},r="_query";return this.hasChildren?(this._initChildren(),e=this.children,n[this.idField||"id"]=this.id,this._loaded||(e._data=void 0,r="read"),e.one(V,N(this._childrenLoaded,this)),t=e[r](n)):this.loaded(!0),t||z().resolve().promise()},parentNode:function(){var e=this.parent();return e.parent()},loaded:function(e){return void 0===e?this._loaded:void(this._loaded=e)},shouldSerialize:function(e){return this._super.shouldSerialize.call(this,e)&&"children"!==e&&"_loaded"!==e&&"hasChildren"!==e&&"_childrenOptions"!==e}}),he=x.extend({ctor:function(){this._store={}},add:function(e,t){void 0!==e&&(this._store[stringify(e)]=t)},find:function(e){return this._store[stringify(e)]},clear:function(){this._store={}},remove:function(e){delete this._store[stringify(e)]}});he.create=function(e){var t={inmemory:function(){return new he}};return F(e)&&P(e.find)?e:e===!0?new he:t[e]()};var pe=x.extend({ctor:function(e,t,n){var r,i,a=this,o=N(a.serialize,a),l=N(typeof n===W?k(n):a.data,a),d={},f={},h={},p={},g=!1;a._dataAccessFunction=l,typeof n===W&&(a[n]=k(n)),F(e)&&(r=t?t.define(e):_.define(e)),r&&(a.model=e=r,e.fields&&(E(e.fields,function(e,t){var n;i=e,F(t)&&t.field?i=t.field:typeof t===W&&(i=t),F(t)&&t.from&&(n=t.from),g=g||n&&n!==e||i!==e,f[e]=k(n||i),h[e]=k(e),d[n||i]=e,p[e]=n||i}),g&&(a.serialize=u(o,r,s,h,d,p))),a.data=u(l,r,c,f,d,p))},errors:function(e){return e?e.errors:null},parse:function(e){return e&&e.rows&&0==e.rows.length&&(e.errors=ne),e},data:function(e){return e&&void 0!=e.rows?e.rows:e},total:function(e){return e&&void 0!=e.total?e.total:e.length},serialize:function(e){return e}}),ge=x.extend({ctor:function(e){this.data=e||[]},statics:{normalizeFilter:o,filterExpr:function(e){var t,n,r,i,a,o,s=[],c=[],u=[],l={and:" && ",or:" || "},d=e.filters;for(t=0,n=d.length;t<n;t++)r=d[t],a=r.field,o=r.operator,r.filters?(i=ge.filterExpr(r),r=i.expression.replace(/__o\[(\d+)\]/g,function(e,t){return t=+t,"__o["+(u.length+t)+"]"}).replace(/__f\[(\d+)\]/g,function(e,t){return t=+t,"__f["+(c.length+t)+"]"}),u.push.apply(u,i.operators),c.push.apply(c,i.fields)):(typeof a===U?(i="__f["+c.length+"](d)",c.push(a)):i=y.expr(a),typeof o===U?(r="__o["+u.length+"]("+i+", "+_e.quote(r.value)+")",u.push(o)):r=_e[(o||"eq").toLowerCase()](i,r.value,void 0===r.ignoreCase||r.ignoreCase)),s.push(r);return{expression:"("+s.join(l[e.logic])+")",fields:c,operators:u}},process:function(e,t){t=t||{};var n,r=new ge(e),a=i(t.sort||[]),o=t.filterCallback,s=t.filter,c=t.skip,u=t.take;return s&&(r=r.filter(s),o&&(r=o(r)),n=r.toArray().length),a&&(r=r.sort(a)),void 0!==c&&void 0!==u&&(r=r.range(c,u)),{total:n,data:r.toArray()}}},toArray:function(){return this.data},range:function(e,t){return new ge(this.data.slice(e,e+t))},skip:function(e){return new ge(this.data.slice(e))},take:function(e){return new ge(this.data.slice(0,e))},select:function(e){return new ge(A(this.data,e))},order:function(e,t){var n={dir:t};return e&&(e.compare?n.compare=e.compare:n.field=e),new ge(this.data.slice(0).sort(be.create(n)))},orderBy:function(e){return this.order(e,"asc")},orderByDescending:function(e){return this.order(e,"desc")},sort:function(e,t,n){var r=i(e,t),a=[],o=r.length,s=0;if(n=n||be,o){for(;s<o;s++)a.push(n.create(r[s]));return this.orderBy({compare:n.combine(a)})}return this},filter:function(e){var t,n,r,i,a,s,c,u,l=this.data,d=[];if(e=o(e),!e||0===e.filters.length)return this;for(i=ge.filterExpr(e),s=i.fields,c=i.operators,a=u=new Function("d, __f, __o","return "+i.expression),(s.length||c.length)&&(u=function(e){return a(e,s,c)}),t=0,r=l.length;t<r;t++)n=l[t],u(n)&&d.push(n);return new ge(d)}}),ve={create:function(e,t){var n,r=e.transport,i=e.read;return n=i?P(r)?r:new ye({read:i,dataSource:t}):new me({data:e.data||[]})}},me=x.extend({ctor:function(e){this.data=e.data},read:function(e){var t=[];if(e.take&&e.skip)for(var n=0;n<e.take;n++)t.push(this.data[e.skip+n]);else t=this.data;e.success(t)},update:function(e){e.success(e.data)},create:function(e){e.success(e.data)},destroy:function(e){e.success(e.data)}}),ye=x.extend({ctor:function(e){var t,n=this;e=n.options=D({},n.options,e),E(ie,function(t,n){typeof e[n]===W&&(e[n]={url:e[n]})}),n.cache=e.cache?he.create(e.cache):{find:L,add:L},t=e.parameterMap,P(e.push)&&(n.push=e.push),n.push||(n.push=O),n.parameterMap=P(t)?t:function(e){var n={};return E(e,function(e,r){e in t&&(e=t[e],F(e)&&(r=e.value(r),e=e.key)),n[e]=r}),n}},options:{parameterMap:O},create:function(e){return j(this.setup(e,Q))},read:function(e){var t,n,r,i=this,a=i.cache;e=i.setup(e,X),t=e.success||L,n=e.error||L,r=a.find(e.data),void 0!==r?t(r):(e.success=function(n){a.add(e.data,n),t(n)},j(e))},update:function(e){return j(this.setup(e,G))},destroy:function(e){return j(this.setup(e,Z))},setup:function(e,t){e=e||{};var n,r=this,i=r.options[t],a=P(i.data)?i.data(e.data):i.data;return e=D(!0,{},i,e),n=D(!0,{},a,e.data),e.data=r.parameterMap(n,t),P(e.url)&&(e.url=e.url(n)),e}}),_e=function(){function e(e){return e.replace(ue,"\\").replace(ce,"")}function t(t,n,r,i){var a;return null!=r&&(typeof r===W&&(r=e(r),a=se.exec(r),a?r=new Date((+a[1])):i?(r="'"+r.toLowerCase()+"'",n="("+n+' || "").toLowerCase()'):r="'"+r+"'"),r.getTime&&(n="("+n+"?"+n+".getTime():"+n+")",r=r.getTime())),n+" "+t+" "+r}return{quote:function(t){return t&&t.getTime?"new Date("+t.getTime()+")":"string"==typeof t?"'"+e(t)+"'":""+t},eq:function(e,n,r){return t("==",e,n,r)},neq:function(e,n,r){return t("!=",e,n,r)},gt:function(e,n,r){return t(">",e,n,r)},gte:function(e,n,r){return t(">=",e,n,r)},lt:function(e,n,r){return t("<",e,n,r)},lte:function(e,n,r){return t("<=",e,n,r)},startswith:function(t,n,r){return r&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".lastIndexOf('"+n+"', 0) == 0"},endswith:function(t,n,r){return r&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"', "+t+".length - "+(n||"").length+") >= 0"},contains:function(t,n,r){return r&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"') >= 0"},doesnotcontain:function(t,n,r){return r&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"') == -1"}}}(),be={selector:function(e){return P(e)?e:k(e)},compare:function(e){var t=this.selector(e);return function(e,n){return e=t(e),n=t(n),null==e&&null==n?0:null==e?-1:null==n?1:e.localeCompare?e.localeCompare(n):e>n?1:e<n?-1:0}},create:function(e){var t=e.compare||this.compare(e.field);return"desc"==e.dir?function(e,n){return t(n,e,!0)}:t},combine:function(e){return function(t,n){var r,i,a=e[0](t,n);for(r=1,i=e.length;r<i;r++)a=a||e[r](t,n);return a}}};D(J,{Query:ge,DataSource:le,NodeDataSource:de,LocalTransport:me,RemoteTransport:ye,Cache:he,DataReader:pe,Model:_}),y.dataSource=function(e){return e instanceof le||(e=new le(e)),e},y.nodeDataSource=function(e){return e instanceof de||(e=new de(e)),e},y.data=J,t.exports=J},{"./fly.core":6,"./fly.format":8,"./fly.model":11,"./fly.observable":12,"./fly.utils":17}],8:[function(require,module,exports){"use strict";var fly=require("./fly.core"),$=fly.$,objectToString={}.toString,numberRegExp=/^\d*$/,escapeableRegExp=/["\\\x00-\x1f\x7f-\x9f]/g,_meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},formatDate=function(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in n){var i,a=new RegExp("("+r+")"),o=n[r]+"";a.test(t)&&(i=1==RegExp.$1.length?o:("00"+o).substr(o.length),t=t.replace(RegExp.$1,i))}return t};fly.formatDate=function(e,t){var n,r,i,a="yyyy/MM/dd HH:mm:ss",o=new Date,s=0,c=["yyyyMMddHHmmss","yyyyMMddHHmm","yyyyMMdd","yyyy-MM-dd HH:mm:ss","yyyy-MM-dd HH:mm","yyyy-MM-dd","HHmmss","HH:mm:ss"],u={"y+":o.getFullYear(),"M+":o.getMonth()+1,"d+":o.getDate(),"H+":0,"m+":0,"s+":0};if("[object Date]"===objectToString.call(e))n=e;else if(e)for(r=c.length;s<r;s++){var l=a,d=c[s];if(d.length==e.length){for(i in u){var f=new RegExp("("+i+")"),h=d.search(f),p="";if(h>=0){if(p=e.substr(h,RegExp.$1.length),!numberRegExp.test(p))break}else p=u[i]+"";p=1==p.length?"0"+p:p,l=l.replace(f,p)}try{if(n=new Date(l),!n.getTime())continue;break}catch(g){continue}}}return e=n&&n.getTime&&n.getTime()?n:e,t?formatDate(e,t):e},fly.toJSON=function(e){if("object"==typeof JSON&&JSON.stringify){var t=JSON.stringify(e);return t}var n=typeof e;if(null===e)return"null";if("undefined"!=n){if("number"==n||"boolean"==n)return e+"";if("string"==n)return fly.quoteString(e);if("object"==n){if("function"==typeof e.toJSON)return fly.toJSON(e.toJSON());if(e.constructor===Date)return formatDate(e,"yyyy-MM-ddTHH:mm:ss.SZ");if(e.constructor===Array){for(var r=[],i=0;i<e.length;i++)r.push(fly.toJSON(e[i])||"");return"["+r.join(",")+"]"}var a=[];for(var o in e){var s,n=typeof o;if("number"==n)s='"'+o+'"';else{if("string"!=n)continue;s=fly.quoteString(o)}if("function"!=typeof e[o]){var c=fly.toJSON(e[o]);a.push(s+":"+c)}}return"{"+a.join(", ")+"}"}}},fly.evalJSON=function(src){return src?"string"!=typeof src?src:"object"==typeof JSON&&JSON.parse&&!fly.browser.ie?JSON.parse(src):eval("("+src+")"):{}},fly.secureEvalJSON=function(src){if("object"==typeof JSON&&JSON.parse)return JSON.parse(src);var filtered=src;if(filtered=filtered.replace(/\\["\\\/bfnrtu]/g,"@"),filtered=filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]"),filtered=filtered.replace(/(?:^|:|,)(?:\s*\[)+/g,""),/^[\],:{}\s]*$/.test(filtered))return eval("("+src+")");throw new SyntaxError("Error parsing JSON, source is not valid.")},fly.quoteString=function(e){return e.match(escapeableRegExp)?'"'+e.replace(escapeableRegExp,function(e){var t=_meta[e];return"string"==typeof t?t:(t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})+'"':'"'+e+'"'};var format=fly.format=function(e,t){return 1==arguments.length?function(){var t=$.makeArray(arguments);return t.unshift(e),format.format.apply(this,t)}:(arguments.length>2&&t.constructor!=Array&&(t=$.makeArray(arguments).slice(1)),t.constructor!=Array&&(t=[t]),$.each(t,function(t,n){e=e.replace(new RegExp("\\{"+t+"\\}","g"),n)}),e)};module.exports=format},{"./fly.core":6}],9:[function(e,t,n){"use strict";function r(e){var t=!!e&&"length"in e&&e.length,n=o.type(e);return"function"!==n&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e,t){for(var n,r,i,a,s,c=t.createDocumentFragment(),u=[],l=0,d=e.length;l<d;l++)if(n=e[l],
n||0===n)if("object"===o.type(n))o.merge(u,n.nodeType?[n]:n);else if(y.test(n)){for(r=r||c.appendChild(t.createElement("div")),i=(_.exec(n)||["",""])[1].toLowerCase(),a=b[i]||b._default,r.innerHTML=a[1]+o.htmlPrefilter(n)+a[2],s=a[0];s--;)r=r.lastChild;o.merge(u,r.childNodes),r=c.firstChild,r.textContent=""}else u.push(t.createTextNode(n));for(c=t.createDocumentFragment(),l=0;n=u[l++];)c.appendChild(n);return c}var a=e("./fly.support"),o=null,s=[],c={},u=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,l=s.indexOf,d=s.slice,f=s.push,h=s.concat,p={}.toString,g={}.hasOwnProperty;o=function(e){return new o.fn.init(e)},l||(l=function(e,t){var n=-1;t=1*t||0;for(var r=0,i=this.length;r<i;r++)if(r>=t&&this[r]===e){n=r;break}return n}),o.fn=o.prototype={constructor:o,length:0,pushStack:function(e){var t=o.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return o.each(this,e)},map:function(e){return this.pushStack(o.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s.push,sort:s.sort,splice:s.splice},o.fn.init=function(e){return o.parseHTML(e,document)},o.extend=function(){var e,t,n,r,i,a,s=arguments[0]||{},c=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[c]||{},c++),"object"==typeof s||o.isFunction(s)||(s={}),c===u&&(s=this,c--);c<u;c++)if(null!=(e=arguments[c]))for(t in e)n=s[t],r=e[t],s!==r&&(l&&r&&(o.isPlainObject(r)||(i=o.isArray(r)))?(i?(i=!1,a=n&&o.isArray(n)?n:[]):a=n&&o.isPlainObject(n)?n:{},s[t]=o.extend(l,a,r)):void 0!==r&&(s[t]=r));return s},o.extend({noop:function(){},isFunction:function(e){return"function"===o.type(e)},isArray:Array.isArray||function(e){return"array"===o.type(e)},isNumeric:function(e){var t=o.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){return"object"===o.type(e)&&!e.nodeType&&!o.isWindow(e)&&!(e.constructor&&!g.call(e.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[p.call(e)]||"object":typeof e},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,i=0;if(r(e))for(n=e.length;i<n&&t.call(e[i],i,e[i])!==!1;i++);else for(i in e)if(t.call(e[i],i,e[i])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(u,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(r(Object(e))?o.merge(n,"string"==typeof e?[e]:e):f.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:l.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],a=0,o=e.length,s=!n;a<o;a++)r=!t(e[a],a),r!==s&&i.push(e[a]);return i},map:function(e,t,n){var i,a,o=0,s=[];if(r(e))for(i=e.length;o<i;o++)a=t(e[o],o,n),null!=a&&s.push(a);else for(o in e)a=t(e[o],o,n),null!=a&&s.push(a);return h.apply([],s)},guid:1,proxy:function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),o.isFunction(e))return r=d.call(arguments,2),i=function(){return e.apply(t||this,r.concat(d.call(arguments)))},i.guid=e.guid=e.guid||o.guid++,i},htmlPrefilter:function(e){return e.replace(v,"<$1></$2>")},support:{}});var v=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,m=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;o.parseHTML=function(e){var t=a.createHTMLDocument?document.implementation.createHTMLDocument(""):document,n=m.exec(e);return n?[t.createElement(n[1])]:(n=i([e],t),o.merge([],n.childNodes))},o.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){c["[object "+t+"]"]=t.toLowerCase()});var y=/<|&#?\w+;/,_=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,b={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};b.optgroup=b.option,b.tbody=b.tfoot=b.colgroup=b.caption=b.thead,b.th=b.td,t.exports=o},{"./fly.support":15}],10:[function(e,t,n){var r=e("./fly.core");e("./fly.calculate"),e("./fly.class"),e("./fly.data"),e("./fly.format"),e("./fly.model"),e("./fly.observable"),e("./fly.router"),e("./fly.template"),e("./fly.utils"),e("./fly.jquery"),e("./fly.support"),e("./fly.binder"),e("./fly.ajax"),e("./fly.component"),e("./fly.require"),r.version="1.1.5",window.fly=r,t.exports=r},{"./fly.ajax":1,"./fly.binder":2,"./fly.calculate":3,"./fly.class":4,"./fly.component":5,"./fly.core":6,"./fly.data":7,"./fly.format":8,"./fly.jquery":9,"./fly.model":11,"./fly.observable":12,"./fly.require":13,"./fly.router":14,"./fly.support":15,"./fly.template":16,"./fly.utils":17}],11:[function(e,t,n){"use strict";function r(e,t){var n,r;for(r in e){if(n=e[r],f(n)&&n.field&&n.field===t)return n;if(n===t)return n}return null}function i(e,t){if(e===t)return!0;var n,r=c.type(e),a=c.type(t);if(r!==a)return!1;if("date"===r)return e.getTime()===t.getTime();if("object"!==r&&"array"!==r)return!1;for(n in e)if(!i(e[n],t[n]))return!1;return!0}var a=e("./fly.core"),o=(e("./fly.observable"),e("./fly.format")),s=a.ObservableObject,c=a.$,u=c.extend,l=c.isArray,d=c.isEmptyObject,f=c.isPlainObject,h="string",p={number:function(e){return parseFloat(e)},date:function(e){return o.parseDate(e)},"boolean":function(e){return typeof e===h?"true"===e.toLowerCase():null!=e?!!e:e},string:function(e){return null!=e?e+"":e},"default":function(e){return e}},g={string:"",number:0,date:new Date,"boolean":!1,"default":""},v=s.extend({ctor:function(e){var t=this,n=t._initializers;if((!e||d(e))&&(e=u({},t.defaults,e),n))for(var r=0;r<n.length;r++){var i=n[r];e[i]=t.defaults[i]()}t._super(e),t.dirty=!1,t.idField&&(t.id=t.get(t.idField),void 0===t.id&&(t.id=t._defaultId))},shouldSerialize:function(e){return this._super.shouldSerialize(e)&&"uid"!==e&&!("id"!==this.idField&&"id"===e)&&"dirty"!==e&&"_accessors"!==e},_parse:function(e,t){var n,i=this,a=e,o=i.fields||{};return e=o[e],e||(e=r(o,a)),e&&(n=e.parse,!n&&e.type&&(n=p[e.type.toLowerCase()])),n?n(t):t},_notifyChange:function(e){var t=e.action;"add"!=t&&"remove"!=t||(this.dirty=!0)},editable:function(e){return e=(this.fields||{})[e],!e||e.editable!==!1},set:function(e,t,n){var r=this;r.editable(e)&&(t=r._parse(e,t),i(t,r.get(e))||(r.dirty=!0,s.fn.set.call(this,e,t,n)))},accept:function(e){var t,n=this,r=function(){return n};for(t in e){var i=e[t];"_"!=t.charAt(0)&&(i=n.wrap(e[t],t,r)),n._set(t,i)}n.idField&&(n.id=n.get(n.idField)),n.dirty=!1},isNew:function(){return this.id===this._defaultId}});v.define=function(e,t){void 0===t&&(t=e,e=v);var n,r,i,a,o,s,c,d,f=u({defaults:{}},t),m={},y=f.id,_=[];if(y&&(f.idField=y),f.id&&delete f.id,y&&(f.defaults[y]=f._defaultId=""),l(f.fields)){for(s=0,c=f.fields.length;s<c;s++)i=f.fields[s],typeof i===h?m[i]={}:i.field&&(m[i.field]=i);f.fields=m}for(r in f.fields)i=f.fields[r],a=i.type||"default",o=null,d=r,r=typeof i.field===h?i.field:r,i.nullable||(o=f.defaults[d!==r?d:r]=void 0!==i.defaultValue?i.defaultValue:g[a.toLowerCase()],"function"==typeof o&&_.push(r)),t.id===r&&(f._defaultId=o),f.defaults[d!==r?d:r]=o,i.parse=i.parse||p[a];return _.length>0&&(f._initializers=_),n=e.extend(f),n.define=function(e){return v.define(n,e)},f.fields&&(n.fields=f.fields,n.idField=f.idField),n},a.Model=v,t.exports=v},{"./fly.core":6,"./fly.format":8,"./fly.observable":12}],12:[function(e,t,n){"use strict";function r(e,t,n,r){return function(i){var a,o={};for(a in i)o[a]=i[a];r?o.field=n+"."+i.field:o.field=n,t==h&&e._notifyChange&&e._notifyChange(o),e.trigger(t,o)}}var i=e("./fly.core"),a=e("./fly.class"),o=i.$,s=o.proxy,c=o.noop,u=[].slice,l={}.toString,d="function",f="string",h="change",p="remove",g="add",v="get",m="[object Object]",y="[object Array]",_=a.extend({ctor:function(){this._events={}},bind:function(e,t,n){var r,i,a,o,s=this,c=0,u=typeof t===d,l=typeof e===f?[e]:e,h=l.length;if(void 0===t){for(r in e)s.bind(r,e[r]);return s}for(;c<h;c++)e=l[c],o=u?t:t[e],o&&(n&&(a=o,o=function(){s.unbind(e,o),a.apply(s,arguments)},o.original=a),i=s._events[e]=s._events[e]||[],i.push(o));return s},one:function(e,t){return this.bind(e,t,!0)},first:function(e,t){for(var n,r,i=this,a=0,o=typeof t===d,s=typeof e===f?[e]:e,c=s.length;a<c;a++)e=s[a],r=o?t:t[e],r&&(n=i._events[e]=i._events[e]||[],n.unshift(r));return i},trigger:function(e,t){var n,r,i=this,a=i._events[e];if(a){for(t=t||{},t.sender=i,t._defaultPrevented=!1,t.preventDefault=function(){this._defaultPrevented=!0},t.isDefaultPrevented=function(){return this._defaultPrevented===!0},a=a.slice(),n=0,r=a.length;n<r;n++)a[n].call(i,t);return t._defaultPrevented===!0}return!1},unbind:function(e,t){var n,r=this,i=r._events[e];if(void 0===e)r._events={};else if(i)if(t)for(n=i.length-1;n>=0;n--)i[n]!==t&&i[n].original!==t||i.splice(n,1);else r._events[e]=[];return r}}),b=_.extend({ctor:function(e){var t,n,r=this,a=function(){return r};if(void 0!==e){r._super();for(n in e)t=e[n],"object"==typeof t&&t&&!t.getTime&&"_"!=n.charAt(0)&&(t=r.wrap(t,n,a)),r[n]=t;r.uid=i.guid()}},shouldSerialize:function(e,t){var n=this.hasOwnProperty(e)&&"_events"!==e&&"_super"!==e&&typeof this[e]!==d;return t?n:n&&"uid"!==e},forEach:function(e){for(var t in this)this.shouldSerialize(t)&&e(this[t],t)},toJSON:function(e){var t,n,r={};for(n in this)this.shouldSerialize(n,e)&&(t=this[n],(t instanceof b||t instanceof x)&&(t=t.toJSON(e)),r[n]=t);return r},get:function(e){var t,n=this;return n.trigger(v,{field:e}),t="this"===e?n:i.getter(e,!0)(n)},_set:function(e,t){var n=this,r=e.indexOf(".")>=0;if(r)for(var a=e.split("."),o="";a.length>1;){o+=a.shift();var s=i.getter(o,!0)(n);if(s instanceof b)return s.set(a.join("."),t),r;o+="."}return i.setter(e)(n,t),r},set:function(e,t){var n=this,r=e.indexOf(".")>=0,a=i.getter(e,!0)(n);a!==t&&(n.trigger("set",{field:e,value:t})||(r||(t=n.wrap(t,e,function(){return n})),(!n._set(e,t)||e.indexOf("(")>=0||e.indexOf("[")>=0)&&n.trigger(h,{field:e})))},parent:c,wrap:function(e,t,n){var a=this,o=l.call(e);if(null!=e&&(o===m||o===y)){var s=e instanceof x,c=e instanceof i.data.DataSource;o!==m||c||s?(o===y||s||c)&&(s||c||(e=new x(e)),e.parent()!=n()&&e.bind(h,r(a,h,t,!1))):(e instanceof b||(e=new b(e)),e.parent()!=n()&&(e.bind(v,r(a,v,t,!0)),e.bind(h,r(a,h,t,!0)))),e.parent=n}return e}}),x=_.extend({ctor:function(e,t){var n=this;e&&(n.type=t||b,n._super(),n.length=e.length,n.wrapAll(e,n))},at:function(e){return this[e]},toJSON:function(e){var t,n,r=this.length,i=new Array(r);for(t=0;t<r;t++)n=this[t],n instanceof b&&(n=n.toJSON(e)),i[t]=n;return i},parent:c,wrapAll:function(e,t){var n,r,i=this,a=function(){return i};for(t=t||[],n=0,r=e.length;n<r;n++)t[n]=i.wrap(e[n],a);return t},wrap:function(e,t){var n,r=this;return null!==e&&l.call(e)===m&&(n=e instanceof r.type||e instanceof i.Model,n||(e=e instanceof b?e.toJSON():e,e=new r.type(e)),e.parent=t,e.bind(h,function(e){r.trigger(h,{field:e.field,node:e.node,index:e.index,items:e.items||[this],action:e.node?e.action||"itemloaded":"itemchange"})})),e},push:function(){var e,t=this.length,n=this.wrapAll(arguments);return e=[].push.apply(this,n),this.trigger(h,{action:g,index:t,items:n}),e},concat:function(e){var t,n=this.length,r=this.wrapAll(e);return t=[].push.apply(this,r),this.trigger(h,{action:g,index:n,items:r}),t},slice:u,sort:[].sort,join:[].join,pop:function(){var e=this.length,t=[].pop.apply(this);return e&&this.trigger(h,{action:p,index:e-1,items:[t]}),t},splice:function(e,t,n){var r,i,a,o=this.wrapAll(u.call(arguments,2));if(r=[].splice.apply(this,[e,t].concat(o)),r.length)for(this.trigger(h,{action:p,index:e,items:r}),i=0,a=r.length;i<a;i++)r[i]&&r[i].children&&r[i].unbind(h);return n&&this.trigger(h,{action:g,index:e,items:o}),r},shift:function(){var e=this.length,t=[].shift.apply(this);return e&&this.trigger(h,{action:p,index:0,items:[t]}),t},unshift:function(){var e,t=this.wrapAll(arguments);return e=[].unshift.apply(this,t),this.trigger(h,{action:g,index:0,items:t}),e},indexOf:function(e){var t,n,r=this;for(t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1},forEach:function(e){for(var t=0,n=this.length;t<n;t++)e(this[t],t,this)},map:function(e){for(var t=0,n=[],r=this.length;t<r;t++)n[t]=e(this[t],t,this);return n},filter:function(e){for(var t,n=0,r=[],i=this.length;n<i;n++)t=this[n],e(t,n,this)&&(r[r.length]=t);return r},find:function(e){for(var t,n=0,r=this.length;n<r;n++)if(t=this[n],e(t,n,this))return t},every:function(e){for(var t,n=0,r=this.length;n<r;n++)if(t=this[n],!e(t,n,this))return!1;return!0},some:function(e){for(var t,n=0,r=this.length;n<r;n++)if(t=this[n],e(t,n,this))return!0;return!1},remove:function(e){var t=this.indexOf(e);t!==-1&&this.splice(t,1)},empty:function(){this.splice(0,this.length)}}),w=x.extend({ctor:function(e,t){this.type=t||b;for(var n=0;n<e.length;n++)this[n]=e[n];this.length=n,this._parent=s(function(){return this},this)},at:function(e){var t=this[e];return t instanceof this.type?t.parent=this._parent:t=this[e]=this.wrap(t,this._parent),t}});i.Observable=_,i.ObservableObject=b,i.ObservableArray=x,i.LazyObservableArray=w,i.observable=function(e){return e instanceof b||(e=new b(e)),e},t.exports=_},{"./fly.class":4,"./fly.core":6}],13:[function(e,t,n){"use strict";function r(e){return e=e.slice(),function(){o(e,function(e){for(e.loaded=!0;e.onload.length;){var t=e.onload.shift();t.call(e)}})}}function e(t){var n=p.alias(t),r=p.get(n);if("js"===c(n)){if(!r)throw new Error('failed to require "'+t+'"');if(!r.exports){if("function"!==a(r.factory))throw new Error('failed to require "'+t+'"');try{r.factory.call(p,e,r.exports={},r)}catch(i){throw i.id=n,p.traceback=i}delete r.factory,u("require","["+n+"] factory called")}return r.exports}}function i(e){var t=p.alias(e),n=p.get(t);if("css"===c(t)){if(!n)throw new Error('failed to require "'+e+'"');if(!n.parsed){if("string"!==a(n.rawCSS))throw new Error('failed to require "'+e+'"');var r=document.createElement("style");f.appendChild(r),r.appendChild(document.createTextNode(n.rawCSS)),delete n.rawCSS,n.parsed=!0}}}function a(e){var t;return null==e?t=String(e):(t=Object.prototype.toString.call(e).toLowerCase(),t=t.substring(8,t.length-1)),t}function o(e,t,n){if("object"==typeof e){var r,i,o=a(e);if(n=n||e,"array"===o||"arguments"===o||"nodelist"===o){for(r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e)===!1)return}else for(r in e)if(e.hasOwnProperty(r)&&t.call(n,e[r],r,e)===!1)return}}function s(e){function t(){}return t.prototype=e,new t}function c(e){var t="js";return e.replace(m,function(e,n){t=n}),"js"!==t&&"css"!==t&&(t="unknown"),t}function u(){var e=(window.localStorage||{}).debug,t=l.call(arguments),n="color: #bada55",r=t.shift(),i=new RegExp(r.replace(/[.\/\\]/g,function(e){return"\\"+e}));r="%c"+r,(e&&"*"===e||i.test(e))&&(v!==r&&(console.groupEnd(v,n),console.group(v=r,n)),/string|number|boolean/.test(a(t[0]))&&(t[0]="%c"+t[0],t.splice(1,0,n)),console.log.apply(console,t))}var l=Array.prototype.slice,d=window.localStorage,f=document.head||document.getElementsByTagName("head")[0],h={},p=s(h);p.version="0.3.5",p.options={prefix:"__SCRAT__",cache:!1,hash:"",timeout:15,alias:{},deps:{},urlPattern:null,comboPattern:null,combo:!1,maxUrlLength:2e3},p.cache={},p.traceback=null,h.config=function(e){var t=p.options;u("scrat.config",e),o(e,function(e,n){var r=t[n],i=a(r);"object"===i?o(e,function(e,t){r[t]=e}):("array"===i&&(e=r.concat(e)),t[n]=e)});try{t.hash!==d.getItem("__SCRAT_HASH__")&&(p.clean(),d.setItem("__SCRAT_HASH__",t.hash)),t.cache=t.cache&&!!t.hash}catch(n){t.cache=!1}return/\bscrat=([\w,]+)\b/.test(location.search)&&o(RegExp.$1.split(","),function(e){switch(e){case"nocache":p.clean(),t.cache=!1;break;case"nocombo":t.combo=!1}}),t},h.async=function(t,n){"string"===a(t)&&(t=[t]),u("scrat.async","require ["+t.join(", ")+"]");var r=new p.Reactor(t,function(){var r=[];o(t,function(t){r.push(e(t))}),n&&n.apply(p,r),u("scrat.async","["+t.join(", ")+"] callback called")});r.run()},h.define=function(e,t){u("scrat.define","["+e+"]");var n=p.options,r=p.cache[e];r?r.factory=t:p.cache[e]={id:e,loaded:!0,factory:t},n.cache&&d.setItem(n.prefix+e,t.toString())},h.defineCSS=function(e,t,n){u("scrat.defineCSS","["+e+"]");var r=p.options;p.cache[e]={id:e,loaded:!0,rawCSS:t},n!==!1&&i(e),r.cache&&d.setItem(r.prefix+e,t)},h.get=function(e){u("scrat.get","["+e+"]");var t,n=p.options,r=c(e),i=p.cache[e];return i?i:n.cache&&(t=d.getItem(n.prefix+e))?("js"===r?window.eval.call(window,'define("'+e+'",'+t+")"):"css"===r&&p.defineCSS(e,t,!1),p.cache[e].loaded=!1,p.cache[e]):null},h.clean=function(){u("scrat.clean");try{o(d,function(e,t){~t.indexOf(p.options.prefix)&&d.removeItem(t)}),d.removeItem("__SCRAT_HASH__")}catch(e){}},h.alias=function(e,t){var n=p.options.alias;if(arguments.length>1)return n[e]=t,p.alias(e);for(;n[e]&&e!==n[e];)switch(a(n[e])){case"function":e=n[e](e);break;case"string":e=n[e]}return e},h.load=function(e,t){"function"===a(t)&&(t={onload:t});var n,r,i,o=t.type||c(e),s="js"===o,l="css"===o,d=+navigator.userAgent.replace(/.*AppleWebKit\/(\d+)\..*/,"$1")<536,h=document.createElement(s?"script":"link"),g="onload"in h;h.onerror=function(){throw clearTimeout(n),clearInterval(r),new Error("Error loading url: "+e)},n=setTimeout(h.onerror,1e3*(t.timeout||15)),s?(h.type="text/javascript",h.async="async",h.src=e):(l&&(h.type="text/css",h.rel="stylesheet"),h.href=e),h.onload=h.onreadystatechange=function(){!h||h.readyState&&!/loaded|complete/.test(h.readyState)||(clearTimeout(n),h.onload=h.onreadystatechange=null,s&&f&&h.parentNode&&f.removeChild(h),t.onload&&t.onload.call(p),h=null)},u("scrat.load","["+e+"]"),f.appendChild(h),l?!d&&g||(u("scrat.load","check css's loading status for compatible"),i=0,r=setInterval(function(){return(i+=20)>t.timeout||!h?(clearTimeout(n),void clearInterval(r)):void(h.sheet&&(clearTimeout(n),clearInterval(r),t.onload&&t.onload.call(p),h=null))},20)):s||t.onload&&t.onload.call(p)},h.Reactor=function(e,t){this.length=0,this.depends={},this.depended={},this.push.apply(this,e),this.callback=t};var g=p.Reactor.prototype;g.push=function(){function e(){0===--t.length&&t.callback()}var t=this,n=l.call(arguments);o(n,function(n){var r=p.alias(n),a=c(r),o=p.get(r);if(o){if(t.depended[r]||o.loaded)return}else o=p.cache[r]={id:r,loaded:!1,onload:[]};t.depended[r]=1,p.options.deps[r]?t.push.apply(t,p.options.deps[r]):t.push.apply(t),"css"===a&&!o.rawCSS&&!o.parsed||"js"===a&&!o.factory&&!o.exports?((t.depends[a]||(t.depends[a]=[])).push(o),++t.length,o.onload.push(e)):o.rawCSS&&i(r)})},g.run=function(){var e=this,t=p.options,n=t.combo,i=this.depends;return 0===this.length?this.callback():(u("reactor.run",i),o(i.unknown,function(t){p.load(e.genUrl(t.id),function(){t.loaded=!0})}),u("reactor.run","combo: "+n),void(n?o(["css","js"],function(n){var a=0,s=[],c=[];o(i[n],function(o,u){a+o.id.length<t.maxUrlLength?(a+=o.id.length,s.push(o.id),c.push(o)):(p.load(e.genUrl(s),r(c)),a=o.id.length,s=[o.id],c=[o]),u===i[n].length-1&&p.load(e.genUrl(s),r(c))})}):o((i.css||[]).concat(i.js||[]),function(t){p.load(e.genUrl(t.id),function(){for(t.loaded=!0;t.onload.length;){var e=t.onload.shift();e.call(t)}})})))},g.genUrl=function(e){"string"===a(e)&&(e=[e]);var t=p.options,n=t.combo&&t.comboPattern||t.urlPattern;switch(t.cache&&"css"===c(e[0])&&o(e,function(t,n){e[n]=t+".js"}),a(n)){case"string":n=n.replace("%s",e.join(","));break;case"function":n=n(e);break;default:n=e.join(",")}return n+(~n.indexOf("?")?"&":"?")+t.hash},o(h,function(t,n){e[n]=t});var v,m=/\.(js|css)(?=[?&,]|$)/i;window.require=p,window.define=p.define,window.defineCSS=p.defineCSS,t.exports=p},{}],14:[function(e,t,n){t.exports=null},{}],15:[function(e,t,n){(function(e){"use strict";var n,r={},i=document.createDocumentFragment(),a=i.appendChild(document.createElement("div")),o=document.createElement("input");o.setAttribute("type","radio"),o.setAttribute("checked","checked"),o.setAttribute("name","t"),a.appendChild(o),r.mutationobserver=window.MutationObserver||window.WebKitMutationObserver||null,r.html5=function(){var e,t=document.createElement("input");return t.setAttribute("type","range"),e="text"!=t.type,t=null,e}(),r.touch="ontouchstart"in document||e.DocumentTouch&&document instanceof e.DocumentTouch||e.navigator.msPointerEnabled&&e.navigator.msMaxTouchPoints>0||e.navigator.pointerEnabled&&e.navigator.maxTouchPoints>0||!1,r.scrollbar=function(e){var t,r;return isNaN(n)||e?(t=document.createElement("div"),t.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",t.innerHTML="&nbsp;",document.body.appendChild(t),r=t.offsetWidth-t.scrollWidth,document.body.removeChild(t),t=null,r):n},r.createHTMLDocument=function(){var e;return!!document.implementation.createHTMLDocument&&(e=document.implementation.createHTMLDocument("").body,e.innerHTML="<form></form><form></form>",2===e.childNodes.length)}(),r.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,a.innerHTML="<textarea>x</textarea>",r.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue,r.dataset=!!a.dataset,r.deleteExpando=function(){var e=document.createElement("a");try{delete e.test}catch(t){return!1}return!0}(),t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(e,t,n){"use strict";function r(e){return e.replace(u,"").replace(l,",").replace(d,"").replace(f,"").replace(h,"").split(p)}function i(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function a(e,t){function n(e){return f+=e.split(/\n/).length-1,l&&(e=e.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),e&&(e=g[1]+i(e)+g[2]+"\n"),e}function a(e){var n=f;if(u?e=u(e,t):o&&(e=e.replace(/\n/g,function(){return f++,"$line="+f+";"})),0===e.indexOf("=")){var i=d&&!/^=[=#]/.test(e);if(e=e.replace(/^=[=#]?|[\s;]*$/g,""),i){var a=e.replace(/\s*\([^\)]+\)/,"");T[a]||/^(include|print)$/.test(a)||(e="$escape("+e+")")}else e="$string("+e+")";e=g[1]+e+g[2]}return o&&(e="$line="+n+";"+e),$(r(e),function(e){if(e&&!h[e]){var t;t="print"===e?m:"include"===e?y:T[e]?"$utils."+e:C[e]?"$helpers."+e:"$data."+e,_+=e+"="+t+",",h[e]=!0}}),e+"\n"}var o=t.debug,s=t.openTag,c=t.closeTag,u=t.parser,l=t.compress,d=t.escape,f=1,h={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},p="".trim,g=p?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],v=p?"$out+=text;return $out;":"$out.push(text);",m="function(){var text=''.concat.apply('',arguments);"+v+"}",y="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+v+"}",_="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(o?"$line=0,":""),b=g[0],x="return new String("+g[3]+");";$(e.split(s),function(e){e=e.split(c);var t=e[0],r=e[1];1===e.length?b+=n(t):(b+=a(t),r&&(b+=n(r)))});var w=_+b+x;o&&(w="try{"+w+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+i(e)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var S=new Function("$data","$filename",w);return S.prototype=T,S}catch(O){throw O.temp="function anonymous($data,$filename) {"+w+"}",O}}var o=e("./fly.core"),s={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},c="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",u=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,l=/[^\w$]+/g,d=new RegExp(["\\b"+c.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),f=/^\d[^,]*|,\d[^,]*/g,h=/^,+|,+$/g,p=/^$|,+/,g=function(e,t){return"string"!=typeof e&&(t=typeof e,"number"===t?e+="":e="function"===t?g(e.call(e)):""),e},v=function(e){return s[e]},m=function(e){return g(e).replace(/&(?![\w#]+;)|[<>"']/g,v)},y=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},_=function(e,t){var n,r;if(y(e))for(n=0,r=e.length;n<r;n++)t.call(e,e[n],n,e);else for(n in e)t.call(e,e[n],n)},b=function(e,t){return e.indexOf("<")!=-1?k(e):"string"==typeof t?k(t,{filename:e}):S(e,t)};b.config=function(e,t){x[e]=t};var x=b.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},w=b.cache={};b.render=function(e,t){return k(e,t)};var S=b.renderFile=function(e,t){var n=b.get(e)||O({filename:e,name:"Render Error",message:"Template not found"});return t?n(t):n};b.get=function(e){var t;if(w[e])t=w[e];else if("object"==typeof document){var n=document.getElementById(e);if(n){var r=(n.value||n.innerHTML).replace(/^\s*|\s*$/g,"");t=k(r,{filename:e})}}return t};var T=b.utils={$helpers:{},$include:S,$string:g,$escape:m,$each:_};b.helper=function(e,t){C[e]=t};var C=b.helpers=T.$helpers;b.onerror=function(e){var t="Template Error\n\n";for(var n in e)t+="<"+n+">\n"+e[n]+"\n\n";"object"==typeof console&&console.error(t)};var O=function(e){return b.onerror(e),function(){return"{Template Error}"}},k=b.compile=function(e,t){function n(n){try{return new o(n,i)+""}catch(r){return t.debug?O(r)():(t.debug=!0,k(e,t)(n))}}t=t||{};for(var r in x)void 0===t[r]&&(t[r]=x[r]);var i=t.filename;try{var o=a(e,t)}catch(s){return s.filename=i||"anonymous",s.name="Syntax Error",O(s)}return n.prototype=o.prototype,n.toString=function(){return o.toString()},i&&t.cache&&(w[i]=n),n},$=T.$each;x.openTag="{{",x.closeTag="}}";var j=function(e,t){var n=t.split(":"),r=n.shift(),i=n.join(":")||"";return i&&(i=", "+i),"$helpers."+r+"("+e+i+")"};x.parser=function(e,t){e=e.replace(/^\s/,"");var n=e.split(" "),r=n.shift(),i=n.join(" ");switch(r){case"if":e="if("+i+"){";break;case"else":n="if"===n.shift()?" if("+n.join(" ")+")":"",e="}else"+n+"{";break;case"/if":e="}";break;case"each":var a=n[0]||"$data",o=n[1]||"as",s=n[2]||"$value",c=n[3]||"$index",u=s+","+c;"as"!==o&&(a="[]"),e="$each("+a+",function("+u+"){";break;case"/each":e="});";break;case"echo":e="print("+i+");";break;case"print":case"include":e=r+"("+n.join(",")+");";break;default:if(/^\s*\|\s*[\w\$]/.test(i)){var l=!0;0===e.indexOf("#")&&(e=e.substr(1),l=!1);for(var d=0,f=e.split("|"),h=f.length,p=f[d++];d<h;d++)p=j(p,f[d]);e=(l?"=":"=#")+p}else e=b.helpers[r]?"=#"+r+"("+n.join(",")+");":"="+e}return e},o.template=b,t.exports=b},{"./fly.core":6}],17:[function(e,t,n){"use strict";var r=e("./fly.core"),i=(r.$,{}),a=/([A-Z])/g,o=/^\s*(?:\{(?:.|\r\n|\n)*\}|\[(?:.|\r\n|\n)*\])\s*$/,s=/^\{(\d+)(:[^\}]+)?\}|^\[[A-Za-z_]*\]$/,c=/^(\+|-?)\d+(\.?)\d*$/,u="character";i.throttle=function(e,t,n){var r,a,o,s=null,c=0;n||(n={});var u=function(){c=n.leading===!1?0:i.now(),s=null,o=e.apply(r,a),s||(r=a=null)};return function(){var l=i.now();c||n.leading!==!1||(c=l);var d=t-(l-c);return r=this,a=arguments,d<=0||d>t?(s&&(clearTimeout(s),s=null),c=l,o=e.apply(r,a),s||(r=a=null)):s||n.trailing===!1||(s=setTimeout(u,d)),o}},i.debounce=function(e,t,n){var r,a,o,s,c,u=function(){var l=i.now()-s;l<t&&l>=0?r=setTimeout(u,t-l):(r=null,n||(c=e.apply(o,a),r||(o=a=null)))};return function(){o=this,a=arguments,s=i.now();var l=n&&!r;return r||(r=setTimeout(u,t)),l&&(c=e.apply(o,a),o=a=null),c}},i.url=function(e){var t="undefined"==typeof CONTEXTPATH?"":CONTEXTPATH;return e?0==e.indexOf("http://")||0==e.indexOf("https://")||0==e.indexOf("//")||t&&0==e.indexOf(t)?e:t+e:""},i.parseOption=function(e,t){var n;return 0===t.indexOf("data")&&(t=t.substring(4),t=t.charAt(0).toLowerCase()+t.substring(1)),t=t.replace(a,"-$1").toLowerCase(),n=e.getAttribute("data-"+t),null===n?n=void 0:"null"===n?n=null:"true"===n?n=!0:"false"===n?n=!1:c.test(n)?n=parseFloat(n):o.test(n)&&!s.test(n)&&(n=new Function("return ("+n+")")()),n},i.parseOptions=function(e,t){var n,r,a={};for(n in t)r=i.parseOption(e,n),void 0!==r&&(a[n]=r);return a},i.getByteLen=function(e){for(var t=0,e=e||"",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);t+=i>=0&&i<=128?1:2}return t},i.isDOM=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},i.caret=function(e,t,n){var r,i=void 0!==t;if(e=e[0]||e,n=void 0===n?t:n,!i||!e.disabled){try{if(void 0!==e.selectionStart)i?(e.focus(),e.setSelectionRange(t,n)):t=[e.selectionStart,e.selectionEnd];else if(document.selection)if(e.focus(),r=e.createTextRange(),i)r.collapse(!0),r.moveStart(u,t),r.moveEnd(u,n-t),r.select();else{var a,o,s=r.duplicate();r.moveToBookmark(document.selection.createRange().getBookmark()),s.setEndPoint("EndToStart",r),a=s.text.length,o=a+r.text.length,t=[a,o]}}catch(c){t=[]}return t}},i.selectRange=function(e,t,n){var r;return e=e[0]||e,e.createTextRange?(r=e.createTextRange(),r.collapse(!0),r.moveEnd(u,n),r.moveStart(u,t),r.select()):(e.focus(),e.setSelectionRange(t,n)),e},r.utils=i,t.exports=i},{"./fly.core":6}]},{},[10]);